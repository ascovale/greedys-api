{
  "collection": {
    "_": {
      "postman_id": "restaurant-registration-flow"
    },
    "item": [
      {
        "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
        "name": "Step 1: Register New Restaurant (test@test.it)",
        "description": {
          "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
          "type": "text/plain"
        },
        "request": {
          "url": {
            "path": [
              "restaurant",
              "register",
              "new"
            ],
            "host": [
              "{{baseUrl}}"
            ],
            "query": [],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "method": "POST",
          "body": {
            "mode": "raw",
            "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
          }
        },
        "response": [],
        "event": [
          {
            "listen": "test",
            "script": {
              "id": "9773e52c-1a61-413b-86ec-d824b2748760",
              "type": "text/javascript",
              "exec": [
                "// === STEP 1: REGISTER NEW RESTAURANT ===",
                "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                "console.log('='.repeat(60));",
                "",
                "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                "});",
                "",
                "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                "    var jsonData = pm.response.json();",
                "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                "    pm.expect(jsonData).to.have.property('success');",
                "    pm.expect(jsonData.success).to.eql(true);",
                "    pm.expect(jsonData).to.have.property('message');",
                "});",
                "",
                "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                "    var jsonData = pm.response.json();",
                "    pm.expect(jsonData.data).to.have.property('id');",
                "    ",
                "    // Save restaurant ID for next steps",
                "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                "    ",
                "    // Save user/owner ID if available",
                "    if (jsonData.data.userId) {",
                "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                "    }",
                "});",
                "",
                "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                "    var jsonData = pm.response.json();",
                "    if (jsonData.data && jsonData.data.email) {",
                "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                "    }",
                "});",
                "",
                "// Store status for debugging",
                "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                "console.log('Next: Proceed to STEP 2 - Admin Login');"
              ],
              "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
            }
          }
        ]
      },
      {
        "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
        "name": "Step 2: Admin Login",
        "description": {
          "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
          "type": "text/plain"
        },
        "request": {
          "url": {
            "path": [
              "admin",
              "auth",
              "login"
            ],
            "host": [
              "{{baseUrl}}"
            ],
            "query": [],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "method": "POST",
          "body": {
            "mode": "raw",
            "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
          }
        },
        "response": [],
        "event": [
          {
            "listen": "test",
            "script": {
              "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
              "type": "text/javascript",
              "exec": [
                "// === STEP 2: ADMIN LOGIN ===",
                "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                "console.log('='.repeat(60));",
                "",
                "pm.test(\"‚úÖ Status code is 200\", function () {",
                "    pm.response.to.have.status(200);",
                "});",
                "",
                "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                "    var jsonData = pm.response.json();",
                "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                "    ",
                "    pm.expect(jsonData.success).to.eql(true);",
                "    pm.expect(jsonData.data).to.have.property('jwt');",
                "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                "    ",
                "    // Store admin token for subsequent admin requests",
                "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                "    ",
                "    // Store refresh token",
                "    if (jsonData.data.refreshToken) {",
                "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                "    }",
                "});",
                "",
                "pm.test(\"‚úÖ Admin user data returned\", function () {",
                "    var jsonData = pm.response.json();",
                "    pm.expect(jsonData.data).to.have.property('user');",
                "    pm.expect(jsonData.data.user).to.have.property('id');",
                "    ",
                "    // Save admin ID",
                "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                "});",
                "",
                "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
              ],
              "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
            }
          }
        ]
      },
      {
        "id": "3e107438-1fdd-4d91-9310-a526923c42df",
        "name": "Step 3: Get Restaurant User by Email (test@test.it)",
        "description": {
          "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
          "type": "text/plain"
        },
        "request": {
          "url": {
            "path": [
              "admin",
              "restaurant",
              "user",
              "by-email",
              "test@test.it"
            ],
            "host": [
              "{{baseUrl}}"
            ],
            "query": [],
            "variable": []
          },
          "header": [
            {
              "key": "Authorization",
              "value": "Bearer {{testAdminToken}}"
            }
          ],
          "method": "GET"
        },
        "response": [],
        "event": [
          {
            "listen": "test",
            "script": {
              "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
              "type": "text/javascript",
              "exec": [
                "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                "console.log('='.repeat(60));",
                "",
                "pm.test(\"‚úÖ Status code is 200\", function () {",
                "    pm.response.to.have.status(200);",
                "});",
                "",
                "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                "    var jsonData = pm.response.json();",
                "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                "    ",
                "    pm.expect(jsonData.success).to.eql(true);",
                "    pm.expect(jsonData.data).to.have.property('id');",
                "    pm.expect(jsonData.data).to.have.property('username');",
                "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                "});",
                "",
                "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                "    var jsonData = pm.response.json();",
                "    ",
                "    // Store the restaurant user ID",
                "    pm.environment.set('testRUserId', jsonData.data.id);",
                "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                "    ",
                "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                "    console.log('üìß User email:', jsonData.data.username);",
                "});",
                "",
                "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
              ],
              "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
            }
          }
        ]
      },
      {
        "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
        "name": "Step 4: Enable Restaurant User (test@test.it)",
        "description": {
          "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
          "type": "text/plain"
        },
        "request": {
          "url": {
            "path": [
              "admin",
              "restaurant",
              "user",
              "enable"
            ],
            "host": [
              "{{baseUrl}}"
            ],
            "query": [
              {
                "key": "email",
                "value": "test@test.it"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            },
            {
              "key": "Authorization",
              "value": "Bearer {{testAdminToken}}"
            }
          ],
          "method": "POST"
        },
        "response": [],
        "event": [
          {
            "listen": "test",
            "script": {
              "id": "644c22f2-c597-4795-a39f-f1aa18435138",
              "type": "text/javascript",
              "exec": [
                "// === STEP 4: ENABLE RESTAURANT USER ===",
                "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                "console.log('='.repeat(60));",
                "",
                "pm.test(\"‚úÖ Status code is 200\", function () {",
                "    pm.response.to.have.status(200);",
                "});",
                "",
                "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                "    var jsonData = pm.response.json();",
                "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                "    ",
                "    pm.expect(jsonData.success).to.eql(true);",
                "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                "});",
                "",
                "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
              ],
              "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
            }
          }
        ]
      },
      {
        "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
        "name": "Step 5: Enable Restaurant",
        "description": {
          "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
          "type": "text/plain"
        },
        "request": {
          "url": {
            "path": [
              "admin",
              "restaurant",
              "{{testRestaurantId}}",
              "enable_restaurant"
            ],
            "host": [
              "{{baseUrl}}"
            ],
            "query": [],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            },
            {
              "key": "Authorization",
              "value": "Bearer {{testAdminToken}}"
            }
          ],
          "method": "PUT"
        },
        "response": [],
        "event": [
          {
            "listen": "test",
            "script": {
              "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
              "type": "text/javascript",
              "exec": [
                "// === STEP 5: ENABLE RESTAURANT ===",
                "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                "console.log('='.repeat(60));",
                "",
                "pm.test(\"‚úÖ Status code is 200\", function () {",
                "    pm.response.to.have.status(200);",
                "});",
                "",
                "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                "    var jsonData = pm.response.json();",
                "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                "    ",
                "    pm.expect(jsonData.success).to.eql(true);",
                "    pm.expect(jsonData.message).to.include('successfully');",
                "});",
                "",
                "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
              ],
              "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
            }
          }
        ]
      },
      {
        "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
        "name": "Step 6: Restaurant User Login (Verification)",
        "description": {
          "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
          "type": "text/plain"
        },
        "request": {
          "url": {
            "path": [
              "restaurant",
              "user",
              "auth",
              "login"
            ],
            "host": [
              "{{baseUrl}}"
            ],
            "query": [],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "method": "POST",
          "body": {
            "mode": "raw",
            "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
          }
        },
        "response": [],
        "event": [
          {
            "listen": "test",
            "script": {
              "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
              "type": "text/javascript",
              "exec": [
                "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                "console.log('='.repeat(60));",
                "",
                "pm.test(\"‚úÖ Status code is 200\", function () {",
                "    pm.response.to.have.status(200);",
                "});",
                "",
                "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                "    var jsonData = pm.response.json();",
                "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                "    ",
                "    pm.expect(jsonData.success).to.eql(true);",
                "    pm.expect(jsonData.data).to.have.property('jwt');",
                "    ",
                "    // Store restaurant token",
                "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                "    pm.environment.set('testRestaurantToken', token);",
                "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                "});",
                "",
                "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                "    var jsonData = pm.response.json();",
                "    if (jsonData.data.user) {",
                "        console.log('üë§ User:', jsonData.data.user.username);",
                "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                "    }",
                "});",
                "",
                "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                "console.log('‚ïê'.repeat(60));",
                "console.log('‚úÖ Ristorante registrato: test@test.it');",
                "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                "console.log('‚úÖ Admin ha abilitato il ristorante');",
                "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                "console.log('‚ïê'.repeat(60));"
              ],
              "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
            }
          }
        ]
      }
    ],
    "event": [
      {
        "listen": "prerequest",
        "script": {
          "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
          "type": "text/javascript",
          "exec": [
            "// Pre-request validation",
            "const authHeader = pm.request.headers.get('Authorization');",
            "if (authHeader && authHeader.includes('Bearer')) {",
            "    console.log('üîê Authenticated request with token');",
            "}"
          ],
          "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
        }
      }
    ],
    "variable": [],
    "info": {
      "_postman_id": "restaurant-registration-flow",
      "name": "Greedy's Restaurant Registration & Enablement Flow",
      "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
      "description": {
        "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
        "type": "text/plain"
      }
    }
  },
  "environment": {
    "_": {
      "postman_variable_scope": "environment",
      "postman_exported_at": "2024-08-20T00:00:00.000Z",
      "postman_exported_using": "Postman/10.19.0"
    },
    "id": "greedys-restaurant-env-enhanced",
    "name": "Greedy's Restaurant Enhanced Testing Environment",
    "values": [
      {
        "description": {
          "content": "Base URL for all API endpoints",
          "type": "text/plain"
        },
        "type": "any",
        "value": "https://api.greedys.it",
        "key": "baseUrl"
      },
      {
        "description": {
          "content": "Development environment base URL",
          "type": "text/plain"
        },
        "type": "any",
        "value": "http://localhost",
        "key": "baseUrlDev"
      },
      {
        "description": {
          "content": "Staging environment base URL",
          "type": "text/plain"
        },
        "type": "any",
        "value": "https://staging.greedy.api.com",
        "key": "baseUrlStaging"
      },
      {
        "description": {
          "content": "Production environment base URL",
          "type": "text/plain"
        },
        "type": "any",
        "value": "https://api.greedy.com",
        "key": "baseUrlProd"
      },
      {
        "description": {
          "content": "JWT token for customer authentication - populated by login requests",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "customerToken"
      },
      {
        "description": {
          "content": "JWT token for restaurant user authentication - populated by login requests",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "restaurantToken"
      },
      {
        "description": {
          "content": "JWT token for admin authentication - populated by login requests",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "adminToken"
      },
      {
        "description": {
          "content": "Refresh token for token renewal - populated by login responses",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "refreshToken"
      },
      {
        "description": {
          "content": "Token expiration timestamp - extracted from JWT for validation",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "tokenExpiration"
      },
      {
        "description": {
          "content": "Current customer ID - extracted from login or registration",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "customerId"
      },
      {
        "description": {
          "content": "ID of the newly created reservation - populated by Create New Reservation test",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "newReservationId"
      },
      {
        "description": {
          "content": "Test restaurant ID - Trattoria Da Mario",
          "type": "text/plain"
        },
        "type": "any",
        "value": "1",
        "key": "restaurantId"
      },
      {
        "description": {
          "content": "Restaurant User ID for La Soffitta Renovatio - populated by Get Restaurant User by Email test",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "laSoffittaRUserId"
      },
      {
        "description": {
          "content": "Restaurant ID for La Soffitta Renovatio - populated by Get Restaurant User by Email test",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "laSoffittaRestaurantId"
      },
      {
        "description": {
          "content": "First Restaurant User ID found - populated by Get All Restaurant Users test",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "firstRUserId"
      },
      {
        "description": {
          "content": "Current admin user ID",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "adminId"
      },
      {
        "description": {
          "content": "Current reservation ID for testing modifications",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "reservationId"
      },
      {
        "description": {
          "content": "Test time slot ID for evening service",
          "type": "text/plain"
        },
        "type": "any",
        "value": "1",
        "key": "slotId"
      },
      {
        "description": {
          "content": "Test menu ID",
          "type": "text/plain"
        },
        "type": "any",
        "value": "1",
        "key": "menuId"
      },
      {
        "description": {
          "content": "Test service ID for dinner service",
          "type": "text/plain"
        },
        "type": "any",
        "value": "1",
        "key": "serviceId"
      },
      {
        "description": {
          "content": "Test room ID",
          "type": "text/plain"
        },
        "type": "any",
        "value": "1",
        "key": "roomId"
      },
      {
        "description": {
          "content": "Test table ID",
          "type": "text/plain"
        },
        "type": "any",
        "value": "1",
        "key": "tableId"
      },
      {
        "description": {
          "content": "Test allergy ID for gluten intolerance",
          "type": "text/plain"
        },
        "type": "any",
        "value": "1",
        "key": "allergyId"
      },
      {
        "description": {
          "content": "Test customer first name",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Marco",
        "key": "customerFirstName"
      },
      {
        "description": {
          "content": "Test customer last name",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Rossi",
        "key": "customerLastName"
      },
      {
        "description": {
          "content": "Test customer email address",
          "type": "text/plain"
        },
        "type": "any",
        "value": "marco.rossi@email.it",
        "key": "customerEmail"
      },
      {
        "description": {
          "content": "Test customer phone number (Italian format)",
          "type": "text/plain"
        },
        "type": "any",
        "value": "+39 348 123 4567",
        "key": "customerPhone"
      },
      {
        "description": {
          "content": "Test customer password",
          "type": "text/plain"
        },
        "type": "any",
        "value": "TestPass123!",
        "key": "customerPassword"
      },
      {
        "description": {
          "content": "Test customer date of birth",
          "type": "text/plain"
        },
        "type": "any",
        "value": "1985-03-15T00:00:00Z",
        "key": "customerDateOfBirth"
      },
      {
        "description": {
          "content": "Second test customer first name",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Giulia",
        "key": "customer2FirstName"
      },
      {
        "description": {
          "content": "Second test customer last name",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Ferrari",
        "key": "customer2LastName"
      },
      {
        "description": {
          "content": "Second test customer email",
          "type": "text/plain"
        },
        "type": "any",
        "value": "giulia.ferrari@libero.it",
        "key": "customer2Email"
      },
      {
        "description": {
          "content": "Second test customer phone",
          "type": "text/plain"
        },
        "type": "any",
        "value": "+39 347 987 6543",
        "key": "customer2Phone"
      },
      {
        "description": {
          "content": "Test restaurant name",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Trattoria Da Mario",
        "key": "restaurantName"
      },
      {
        "description": {
          "content": "Test restaurant email",
          "type": "text/plain"
        },
        "type": "any",
        "value": "info@trattoriadamario.it",
        "key": "restaurantEmail"
      },
      {
        "description": {
          "content": "Test restaurant phone (Rome area code)",
          "type": "text/plain"
        },
        "type": "any",
        "value": "+39 06 1234 5678",
        "key": "restaurantPhone"
      },
      {
        "description": {
          "content": "Test restaurant address",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Via Roma 123",
        "key": "restaurantAddress"
      },
      {
        "description": {
          "content": "Test restaurant city",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Roma",
        "key": "restaurantCity"
      },
      {
        "description": {
          "content": "Test restaurant postal code (Rome center)",
          "type": "text/plain"
        },
        "type": "any",
        "value": "00186",
        "key": "restaurantPostCode"
      },
      {
        "description": {
          "content": "Test restaurant VAT number (Italian format)",
          "type": "text/plain"
        },
        "type": "any",
        "value": "IT12345678901",
        "key": "restaurantVatNumber"
      },
      {
        "description": {
          "content": "Test restaurant user password",
          "type": "text/plain"
        },
        "type": "any",
        "value": "RestaurantPass123!",
        "key": "restaurantPassword"
      },
      {
        "description": {
          "content": "Test restaurant user email for login",
          "type": "text/plain"
        },
        "type": "any",
        "value": "mario.rossi@trattoriadamario.it",
        "key": "restaurantUserEmail"
      },
      {
        "description": {
          "content": "Second test restaurant name",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Osteria del Mare",
        "key": "restaurant2Name"
      },
      {
        "description": {
          "content": "Second test restaurant email",
          "type": "text/plain"
        },
        "type": "any",
        "value": "info@osteriadelmare.it",
        "key": "restaurant2Email"
      },
      {
        "description": {
          "content": "Second test restaurant phone (Naples area code)",
          "type": "text/plain"
        },
        "type": "any",
        "value": "+39 081 234 5678",
        "key": "restaurant2Phone"
      },
      {
        "description": {
          "content": "Second test restaurant address",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Via del Porto 45",
        "key": "restaurant2Address"
      },
      {
        "description": {
          "content": "Second test restaurant city",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Napoli",
        "key": "restaurant2City"
      },
      {
        "description": {
          "content": "Second test restaurant postal code (Naples center)",
          "type": "text/plain"
        },
        "type": "any",
        "value": "80133",
        "key": "restaurant2PostCode"
      },
      {
        "description": {
          "content": "Test admin first name",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Giuseppe",
        "key": "adminFirstName"
      },
      {
        "description": {
          "content": "Test admin last name",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Verdi",
        "key": "adminLastName"
      },
      {
        "description": {
          "content": "Test admin email",
          "type": "text/plain"
        },
        "type": "any",
        "value": "ascolesevalentino@gmail.com",
        "key": "adminEmail"
      },
      {
        "description": {
          "content": "Test admin password",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Minosse100%",
        "key": "adminPassword"
      },
      {
        "description": {
          "content": "New admin first name to register",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Giuseppe",
        "key": "newAdminFirstName"
      },
      {
        "description": {
          "content": "New admin last name to register",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Verdi",
        "key": "newAdminLastName"
      },
      {
        "description": {
          "content": "New admin email to register",
          "type": "text/plain"
        },
        "type": "any",
        "value": "giuseppe.verdi@greedys.com",
        "key": "newAdminEmail"
      },
      {
        "description": {
          "content": "New admin password to register",
          "type": "text/plain"
        },
        "type": "any",
        "value": "AdminPass123!",
        "key": "newAdminPassword"
      },
      {
        "description": {
          "content": "Test reservation date (future date)",
          "type": "text/plain"
        },
        "type": "any",
        "value": "2025-12-15",
        "key": "reservationDate"
      },
      {
        "description": {
          "content": "Test reservation time (dinner)",
          "type": "text/plain"
        },
        "type": "any",
        "value": "20:00",
        "key": "reservationTime"
      },
      {
        "description": {
          "content": "Test reservation adults count",
          "type": "text/plain"
        },
        "type": "any",
        "value": "2",
        "key": "reservationPax"
      },
      {
        "description": {
          "content": "Test reservation kids count",
          "type": "text/plain"
        },
        "type": "any",
        "value": "0",
        "key": "reservationKids"
      },
      {
        "description": {
          "content": "Test reservation notes in Italian",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Anniversario di matrimonio - tavolo tranquillo per favore",
        "key": "reservationNotes"
      },
      {
        "description": {
          "content": "Current date for testing",
          "type": "text/plain"
        },
        "type": "any",
        "value": "2024-08-08",
        "key": "currentDate"
      },
      {
        "description": {
          "content": "Future date for testing availability",
          "type": "text/plain"
        },
        "type": "any",
        "value": "2024-12-31",
        "key": "futureDate"
      },
      {
        "description": {
          "content": "Past date for historical data testing",
          "type": "text/plain"
        },
        "type": "any",
        "value": "2024-07-01",
        "key": "pastDate"
      },
      {
        "description": {
          "content": "Test dish name - Roman classic",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Spaghetti alla Carbonara",
        "key": "dishName1"
      },
      {
        "description": {
          "content": "Test dish name - Milanese specialty",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Osso Buco alla Milanese",
        "key": "dishName2"
      },
      {
        "description": {
          "content": "Test dish name - House dessert",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Tiramis√π della Casa",
        "key": "dishName3"
      },
      {
        "description": {
          "content": "Test menu name for appetizers",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Menu Antipasti",
        "key": "menuName1"
      },
      {
        "description": {
          "content": "Test menu name for first courses",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Menu Primi Piatti",
        "key": "menuName2"
      },
      {
        "description": {
          "content": "Test menu name for main courses",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Menu Secondi Piatti",
        "key": "menuName3"
      },
      {
        "description": {
          "content": "Test service name for lunch",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Pranzo",
        "key": "serviceName1"
      },
      {
        "description": {
          "content": "Test service name for dinner",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Cena",
        "key": "serviceName2"
      },
      {
        "description": {
          "content": "Test room name - Main dining room",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Sala Principale",
        "key": "roomName1"
      },
      {
        "description": {
          "content": "Test room name - Terrace",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Terrazza",
        "key": "roomName2"
      },
      {
        "description": {
          "content": "Test table name",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Tavolo 1",
        "key": "tableName1"
      },
      {
        "description": {
          "content": "Test table capacity",
          "type": "text/plain"
        },
        "type": "any",
        "value": "4",
        "key": "tableCapacity"
      },
      {
        "description": {
          "content": "Test allergy name - Gluten",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Glutine",
        "key": "allergyName"
      },
      {
        "description": {
          "content": "Test FCM token for notifications",
          "type": "text/plain"
        },
        "type": "any",
        "value": "test_fcm_token_12345",
        "key": "fcmToken"
      },
      {
        "description": {
          "content": "Test device ID for notifications",
          "type": "text/plain"
        },
        "type": "any",
        "value": "test_device_android_001",
        "key": "deviceId"
      },
      {
        "description": {
          "content": "Test Google OAuth token",
          "type": "text/plain"
        },
        "type": "any",
        "value": "test_google_oauth_token",
        "key": "googleToken"
      },
      {
        "description": {
          "content": "Test search query for restaurants",
          "type": "text/plain"
        },
        "type": "any",
        "value": "trattoria",
        "key": "searchQuery"
      },
      {
        "description": {
          "content": "Test page number for paginated requests",
          "type": "text/plain"
        },
        "type": "any",
        "value": "0",
        "key": "pageNumber"
      },
      {
        "description": {
          "content": "Test page size for paginated requests",
          "type": "text/plain"
        },
        "type": "any",
        "value": "20",
        "key": "pageSize"
      },
      {
        "description": {
          "content": "Test restaurant price level",
          "type": "text/plain"
        },
        "type": "any",
        "value": "$$",
        "key": "priceLevel"
      },
      {
        "description": {
          "content": "Test cuisine type",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Italiana Tradizionale",
        "key": "cuisineType"
      },
      {
        "description": {
          "content": "Test no-show time limit in minutes",
          "type": "text/plain"
        },
        "type": "any",
        "value": "15",
        "key": "noShowTimeLimit"
      },
      {
        "description": {
          "content": "Test latitude for Rome center",
          "type": "text/plain"
        },
        "type": "any",
        "value": "41.9028",
        "key": "latitude"
      },
      {
        "description": {
          "content": "Test longitude for Rome center",
          "type": "text/plain"
        },
        "type": "any",
        "value": "12.4964",
        "key": "longitude"
      },
      {
        "description": {
          "content": "Italian timezone",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Europe/Rome",
        "key": "timezone"
      },
      {
        "description": {
          "content": "Euro currency code",
          "type": "text/plain"
        },
        "type": "any",
        "value": "EUR",
        "key": "currency"
      },
      {
        "description": {
          "content": "Italian language code",
          "type": "text/plain"
        },
        "type": "any",
        "value": "it-IT",
        "key": "language"
      },
      {
        "description": {
          "content": "Unique test run identifier - populated by test setup scripts",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "testRunId"
      },
      {
        "description": {
          "content": "Test execution start timestamp",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "testStartTime"
      },
      {
        "description": {
          "content": "Test execution end timestamp",
          "type": "text/plain"
        },
        "type": "any",
        "value": "",
        "key": "testEndTime"
      },
      {
        "description": {
          "content": "Maximum acceptable response time in milliseconds",
          "type": "text/plain"
        },
        "type": "any",
        "value": "5000",
        "key": "maxResponseTime"
      },
      {
        "description": {
          "content": "Fast response time threshold in milliseconds",
          "type": "text/plain"
        },
        "type": "any",
        "value": "1000",
        "key": "fastResponseTime"
      },
      {
        "description": {
          "content": "Slow response time threshold in milliseconds",
          "type": "text/plain"
        },
        "type": "any",
        "value": "3000",
        "key": "slowResponseTime"
      },
      {
        "description": {
          "content": "Number of concurrent users for load testing",
          "type": "text/plain"
        },
        "type": "any",
        "value": "10",
        "key": "concurrentUsers"
      },
      {
        "description": {
          "content": "Number of iterations for load testing",
          "type": "text/plain"
        },
        "type": "any",
        "value": "100",
        "key": "loadTestIterations"
      },
      {
        "description": {
          "content": "Delay between requests in milliseconds",
          "type": "text/plain"
        },
        "type": "any",
        "value": "100",
        "key": "requestDelay"
      },
      {
        "description": {
          "content": "Number of retry attempts for failed requests",
          "type": "text/plain"
        },
        "type": "any",
        "value": "3",
        "key": "retryAttempts"
      },
      {
        "description": {
          "content": "Array of authentication tokens for concurrent testing",
          "type": "text/plain"
        },
        "type": "any",
        "value": "[]",
        "key": "authTokens"
      },
      {
        "description": {
          "content": "Enable/disable test data cleanup after test execution",
          "type": "text/plain"
        },
        "type": "any",
        "value": "true",
        "key": "testDataCleanup"
      },
      {
        "description": {
          "content": "Enable/disable debug logging",
          "type": "text/plain"
        },
        "type": "any",
        "value": "false",
        "key": "debugMode"
      },
      {
        "description": {
          "content": "Enable/disable security-specific test validations",
          "type": "text/plain"
        },
        "type": "any",
        "value": "false",
        "key": "securityTestMode"
      },
      {
        "description": {
          "content": "Enable/disable performance monitoring and logging",
          "type": "text/plain"
        },
        "type": "any",
        "value": "true",
        "key": "performanceMonitoring"
      },
      {
        "description": {
          "content": "Maximum acceptable error percentage for test runs",
          "type": "text/plain"
        },
        "type": "any",
        "value": "5",
        "key": "errorThreshold"
      },
      {
        "description": {
          "content": "Current test environment identifier",
          "type": "text/plain"
        },
        "type": "any",
        "value": "docker-local",
        "key": "testEnvironment"
      },
      {
        "description": {
          "content": "API version for versioned endpoints",
          "type": "text/plain"
        },
        "type": "any",
        "value": "v1",
        "key": "apiVersion"
      },
      {
        "description": {
          "content": "Custom User-Agent for API requests",
          "type": "text/plain"
        },
        "type": "any",
        "value": "Postman-Greedy-Test-Suite/1.0",
        "key": "userAgent"
      },
      {
        "description": {
          "content": "Default Content-Type header",
          "type": "text/plain"
        },
        "type": "any",
        "value": "application/json",
        "key": "contentType"
      },
      {
        "description": {
          "content": "Default Accept header",
          "type": "text/plain"
        },
        "type": "any",
        "value": "application/json",
        "key": "acceptType"
      },
      {
        "description": {
          "content": "CORS origin for testing cross-origin requests",
          "type": "text/plain"
        },
        "type": "any",
        "value": "https://greedy-frontend.local",
        "key": "corsOrigin"
      }
    ]
  },
  "globals": {
    "id": "2d2fe045-2611-4696-a363-85795801afd6",
    "values": []
  },
  "run": {
    "stats": {
      "iterations": {
        "total": 1,
        "pending": 0,
        "failed": 0
      },
      "items": {
        "total": 6,
        "pending": 0,
        "failed": 0
      },
      "scripts": {
        "total": 12,
        "pending": 0,
        "failed": 0
      },
      "prerequests": {
        "total": 6,
        "pending": 0,
        "failed": 0
      },
      "requests": {
        "total": 6,
        "pending": 0,
        "failed": 0
      },
      "tests": {
        "total": 6,
        "pending": 0,
        "failed": 0
      },
      "assertions": {
        "total": 17,
        "pending": 0,
        "failed": 14
      },
      "testScripts": {
        "total": 6,
        "pending": 0,
        "failed": 0
      },
      "prerequestScripts": {
        "total": 6,
        "pending": 0,
        "failed": 0
      }
    },
    "timings": {
      "responseAverage": 267.3333333333333,
      "responseMin": 77,
      "responseMax": 614,
      "responseSd": 222.03353100126319,
      "dnsAverage": 0,
      "dnsMin": 0,
      "dnsMax": 0,
      "dnsSd": 0,
      "firstByteAverage": 0,
      "firstByteMin": 0,
      "firstByteMax": 0,
      "firstByteSd": 0,
      "started": 1761728961294,
      "completed": 1761728963266
    },
    "executions": [
      {
        "cursor": {
          "position": 0,
          "iteration": 0,
          "length": 6,
          "cycles": 1,
          "empty": false,
          "eof": false,
          "bof": true,
          "cr": false,
          "ref": "5409bfd3-eaf9-4cc0-9cc1-4e81a34bad7f",
          "httpRequestId": "97107788-84ae-418b-838b-dd3f18eb6488"
        },
        "item": {
          "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
          "name": "Step 1: Register New Restaurant (test@test.it)",
          "description": {
            "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "restaurant",
                "register",
                "new"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 1: REGISTER NEW RESTAURANT ===",
                  "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                  "    pm.expect(jsonData).to.have.property('success');",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    ",
                  "    // Save restaurant ID for next steps",
                  "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                  "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                  "    ",
                  "    // Save user/owner ID if available",
                  "    if (jsonData.data.userId) {",
                  "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                  "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data && jsonData.data.email) {",
                  "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                  "    }",
                  "});",
                  "",
                  "// Store status for debugging",
                  "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                  "console.log('Next: Proceed to STEP 2 - Admin Login');"
                ],
                "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "restaurant",
              "register",
              "new"
            ],
            "host": [
              "api",
              "greedys",
              "it"
            ],
            "query": [],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "b64d18d3-bc97-42d5-911e-8592bf6e9eac",
              "system": true
            },
            {
              "key": "Host",
              "value": "api.greedys.it",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "433",
              "system": true
            }
          ],
          "method": "POST",
          "body": {
            "mode": "raw",
            "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
          }
        },
        "response": {
          "id": "817dabde-5492-4635-84a4-6975c5d1b6a4",
          "status": "Created",
          "code": 201,
          "header": [
            {
              "key": "Cache-Control",
              "value": "no-cache, no-store, max-age=0, must-revalidate"
            },
            {
              "key": "Content-Type",
              "value": "application/json"
            },
            {
              "key": "Date",
              "value": "Wed, 29 Oct 2025 09:09:21 GMT"
            },
            {
              "key": "Expires",
              "value": "0"
            },
            {
              "key": "Pragma",
              "value": "no-cache"
            },
            {
              "key": "Vary",
              "value": "Origin"
            },
            {
              "key": "Vary",
              "value": "Access-Control-Request-Method"
            },
            {
              "key": "Vary",
              "value": "Access-Control-Request-Headers"
            },
            {
              "key": "X-Content-Type-Options",
              "value": "nosniff"
            },
            {
              "key": "X-Frame-Options",
              "value": "DENY"
            },
            {
              "key": "X-Xss-Protection",
              "value": "0"
            },
            {
              "key": "Transfer-Encoding",
              "value": "chunked"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              123,
              34,
              105,
              100,
              34,
              58,
              51,
              44,
              34,
              110,
              97,
              109,
              101,
              34,
              58,
              34,
              84,
              101,
              115,
              116,
              32,
              82,
              101,
              115,
              116,
              97,
              117,
              114,
              97,
              110,
              116,
              34,
              44,
              34,
              97,
              100,
              100,
              114,
              101,
              115,
              115,
              34,
              58,
              34,
              86,
              105,
              97,
              32,
              100,
              101,
              108,
              32,
              84,
              101,
              115,
              116,
              32,
              49,
              34,
              44,
              34,
              112,
              111,
              115,
              116,
              95,
              99,
              111,
              100,
              101,
              34,
              58,
              34,
              48,
              48,
              49,
              48,
              48,
              34,
              44,
              34,
              118,
              97,
              116,
              78,
              117,
              109,
              98,
              101,
              114,
              34,
              58,
              34,
              73,
              84,
              49,
              50,
              51,
              52,
              53,
              54,
              55,
              56,
              57,
              48,
              49,
              34,
              44,
              34,
              112,
              105,
              34,
              58,
              34,
              73,
              84,
              49,
              50,
              51,
              52,
              53,
              54,
              55,
              56,
              57,
              48,
              49,
              34,
              44,
              34,
              114,
              101,
              115,
              116,
              97,
              117,
              114,
              97,
              110,
              116,
              73,
              109,
              97,
              103,
              101,
              34,
              58,
              110,
              117,
              108,
              108,
              44,
              34,
              101,
              109,
              97,
              105,
              108,
              34,
              58,
              34,
              116,
              101,
              115,
              116,
              64,
              116,
              101,
              115,
              116,
              46,
              105,
              116,
              34,
              125
            ]
          },
          "cookie": [],
          "responseTime": 614,
          "responseSize": 175
        },
        "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
        "assertions": [
          {
            "assertion": "‚úÖ Status code is 201 or 200",
            "skipped": false
          },
          {
            "assertion": "‚úÖ Restaurant registration successful",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 1,
              "test": "‚úÖ Restaurant registration successful",
              "message": "expected { Object (id, name, ...) } to have property 'success'",
              "stack": "AssertionError: expected { Object (id, name, ...) } to have property 'success'\n   at Object.eval sandbox-script.js:2:1)"
            }
          },
          {
            "assertion": "‚úÖ Restaurant data returned with ID",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 2,
              "test": "‚úÖ Restaurant data returned with ID",
              "message": "Target cannot be null or undefined.",
              "stack": "AssertionError: Target cannot be null or undefined.\n   at Object.eval sandbox-script.js:3:1)"
            }
          },
          {
            "assertion": "‚úÖ Email is test@test.it",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "4fc1486f-7310-4257-906c-3f284f7bc83e",
          "length": 6,
          "cycles": 1,
          "position": 1,
          "iteration": 0,
          "httpRequestId": "68bc9f75-087a-41c5-8d4d-806dc1a2fb08"
        },
        "item": {
          "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
          "name": "Step 2: Admin Login",
          "description": {
            "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "auth",
                "login"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 2: ADMIN LOGIN ===",
                  "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.data).to.have.property('jwt');",
                  "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                  "    ",
                  "    // Store admin token for subsequent admin requests",
                  "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                  "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                  "    ",
                  "    // Store refresh token",
                  "    if (jsonData.data.refreshToken) {",
                  "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Admin user data returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('user');",
                  "    pm.expect(jsonData.data.user).to.have.property('id');",
                  "    ",
                  "    // Save admin ID",
                  "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                  "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                  "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                ],
                "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "admin",
              "auth",
              "login"
            ],
            "host": [
              "api",
              "greedys",
              "it"
            ],
            "query": [],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "3eeac115-960c-43cb-abc7-87f5e993bd6d",
              "system": true
            },
            {
              "key": "Host",
              "value": "api.greedys.it",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "104",
              "system": true
            }
          ],
          "method": "POST",
          "body": {
            "mode": "raw",
            "raw": "{\n    \"username\": \"ascolesevalentino@gmail.com\",\n    \"password\": \"Minosse100%\",\n    \"rememberMe\": true\n}"
          }
        },
        "response": {
          "id": "31b7e269-4917-4c71-9b71-37f5df598cd5",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Cache-Control",
              "value": "no-cache, no-store, max-age=0, must-revalidate"
            },
            {
              "key": "Content-Type",
              "value": "application/json"
            },
            {
              "key": "Date",
              "value": "Wed, 29 Oct 2025 09:09:22 GMT"
            },
            {
              "key": "Expires",
              "value": "0"
            },
            {
              "key": "Pragma",
              "value": "no-cache"
            },
            {
              "key": "Vary",
              "value": "Origin"
            },
            {
              "key": "Vary",
              "value": "Access-Control-Request-Method"
            },
            {
              "key": "Vary",
              "value": "Access-Control-Request-Headers"
            },
            {
              "key": "X-Content-Type-Options",
              "value": "nosniff"
            },
            {
              "key": "X-Frame-Options",
              "value": "DENY"
            },
            {
              "key": "X-Xss-Protection",
              "value": "0"
            },
            {
              "key": "Transfer-Encoding",
              "value": "chunked"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              123,
              34,
              106,
              119,
              116,
              34,
              58,
              34,
              101,
              121,
              74,
              104,
              98,
              71,
              99,
              105,
              79,
              105,
              74,
              73,
              85,
              122,
              73,
              49,
              78,
              105,
              74,
              57,
              46,
              101,
              121,
              74,
              104,
              89,
              50,
              78,
              108,
              99,
              51,
              78,
              102,
              100,
              72,
              108,
              119,
              90,
              83,
              73,
              54,
              73,
              109,
              70,
              106,
              89,
              50,
              86,
              122,
              99,
              121,
              73,
              115,
              73,
              110,
              86,
              122,
              90,
              88,
              74,
              102,
              100,
              72,
              108,
              119,
              90,
              83,
              73,
              54,
              73,
              109,
              70,
              107,
              98,
              87,
              108,
              117,
              73,
              105,
              119,
              105,
              89,
              88,
              86,
              48,
              97,
              71,
              57,
              121,
              97,
              88,
              82,
              112,
              90,
              88,
              77,
              105,
              79,
              108,
              115,
              105,
              85,
              107,
              57,
              77,
              82,
              86,
              57,
              84,
              86,
              86,
              66,
              70,
              85,
              108,
              57,
              66,
              82,
              69,
              49,
              74,
              84,
              105,
              73,
              115,
              73,
              108,
              66,
              83,
              83,
              86,
              90,
              74,
              84,
              69,
              86,
              72,
              82,
              86,
              57,
              66,
              82,
              69,
              49,
              74,
              84,
              108,
              57,
              83,
              82,
              86,
              78,
              70,
              85,
              108,
              90,
              66,
              86,
              69,
              108,
              80,
              84,
              108,
              57,
              68,
              86,
              86,
              78,
              85,
              84,
              48,
              49,
              70,
              85,
              108,
              57,
              88,
              85,
              107,
              108,
              85,
              82,
              83,
              73,
              115,
              73,
              108,
              66,
              83,
              83,
              86,
              90,
              74,
              84,
              69,
              86,
              72,
              82,
              86,
              57,
              66,
              82,
              69,
              49,
              74,
              84,
              108,
              57,
              83,
              82,
              86,
              78,
              70,
              85,
              108,
              90,
              66,
              86,
              69,
              108,
              80,
              84,
              108,
              57,
              68,
              86,
              86,
              78,
              85,
              84,
              48,
              49,
              70,
              85,
              108,
              57,
              83,
              82,
              85,
              70,
              69,
              73,
              105,
              119,
              105,
              85,
              70,
              74,
              74,
              86,
              107,
              108,
              77,
              82,
              85,
              100,
              70,
              88,
              48,
              70,
              69,
              84,
              85,
              108,
              79,
              88,
              49,
              74,
              70,
              85,
              48,
              86,
              83,
              86,
              107,
              70,
              85,
              83,
              85,
              57,
              79,
              88,
              49,
              74,
              70,
              85,
              49,
              82,
              66,
              86,
              86,
              74,
              66,
              84,
              108,
              82,
              102,
              86,
              49,
              74,
              74,
              86,
              69,
              85,
              105,
              76,
              67,
              74,
              81,
              85,
              107,
              108,
              87,
              83,
              85,
              120,
              70,
              82,
              48,
              86,
              102,
              81,
              85,
              82,
              78,
              83,
              85,
              53,
              102,
              85,
              107,
              86,
              84,
              82,
              86,
              74,
              87,
              81,
              86,
              82,
              74,
              84,
              48,
              53,
              102,
              85,
              107,
              86,
              84,
              86,
              69,
              70,
              86,
              85,
              107,
              70,
              79,
              86,
              70,
              57,
              83,
              82,
              85,
              70,
              69,
              73,
              105,
              119,
              105,
              85,
              70,
              74,
              74,
              86,
              107,
              108,
              77,
              82,
              85,
              100,
              70,
              88,
              48,
              70,
              69,
              84,
              85,
              108,
              79,
              88,
              49,
              74,
              70,
              85,
              49,
              82,
              66,
              86,
              86,
              74,
              66,
              84,
              108,
              82,
              102,
              86,
              86,
              78,
              70,
              85,
              108,
              57,
              83,
              82,
              85,
              70,
              69,
              73,
              105,
              119,
              105,
              85,
              70,
              74,
              74,
              86,
              107,
              108,
              77,
              82,
              85,
              100,
              70,
              88,
              48,
              70,
              69,
              84,
              85,
              108,
              79,
              88,
              49,
              74,
              70,
              85,
              49,
              82,
              66,
              86,
              86,
              74,
              66,
              84,
              108,
              82,
              102,
              86,
              86,
              78,
              70,
              85,
              108,
              57,
              88,
              85,
              107,
              108,
              85,
              82,
              83,
              73,
              115,
              73,
              108,
              66,
              83,
              83,
              86,
              90,
              74,
              84,
              69,
              86,
              72,
              82,
              86,
              57,
              84,
              86,
              48,
              108,
              85,
              81,
              48,
              104,
              102,
              86,
              69,
              57,
              102,
              85,
              107,
              86,
              84,
              86,
              69,
              70,
              86,
              85,
              107,
              70,
              79,
              86,
              70,
              57,
              86,
              85,
              48,
              86,
              83,
              88,
              48,
              70,
              69,
              84,
              85,
              108,
              79,
              73,
              105,
              119,
              105,
              85,
              70,
              74,
              74,
              86,
              107,
              108,
              77,
              82,
              85,
              100,
              70,
              88,
              48,
              70,
              69,
              84,
              85,
              108,
              79,
              88,
              49,
              78,
              88,
              83,
              86,
              82,
              68,
              83,
              70,
              57,
              85,
              84,
              49,
              57,
              68,
              86,
              86,
              78,
              85,
              84,
              48,
              49,
              70,
              85,
              105,
              73,
              115,
              73,
              108,
              66,
              83,
              83,
              86,
              90,
              74,
              84,
              69,
              86,
              72,
              82,
              86,
              57,
              66,
              82,
              69,
              49,
              74,
              84,
              108,
              57,
              83,
              82,
              86,
              78,
              85,
              81,
              86,
              86,
              83,
              81,
              85,
              53,
              85,
              88,
              49,
              74,
              70,
              81,
              85,
              81,
              105,
              76,
              67,
              74,
              81,
              85,
              107,
              108,
              87,
              83,
              85,
              120,
              70,
              82,
              48,
              86,
              102,
              81,
              85,
              82,
              78,
              83,
              85,
              53,
              102,
              85,
              107,
              86,
              84,
              86,
              69,
              70,
              86,
              85,
              107,
              70,
              79,
              86,
              70,
              57,
              88,
              85,
              107,
              108,
              85,
              82,
              83,
              73,
              115,
              73,
              108,
              66,
              83,
              83,
              86,
              90,
              74,
              84,
              69,
              86,
              72,
              82,
              86,
              57,
              66,
              82,
              69,
              49,
              74,
              84,
              108,
              57,
              68,
              86,
              86,
              78,
              85,
              84,
              48,
              49,
              70,
              85,
              108,
              57,
              83,
              82,
              85,
              70,
              69,
              73,
              105,
              119,
              105,
              85,
              70,
              74,
              74,
              86,
              107,
              108,
              77,
              82,
              85,
              100,
              70,
              88,
              48,
              70,
              69,
              84,
              85,
              108,
              79,
              88,
              48,
              78,
              86,
              85,
              49,
              82,
              80,
              84,
              85,
              86,
              83,
              88,
              49,
              100,
              83,
              83,
              86,
              82,
              70,
              73,
              105,
              119,
              105,
              85,
              70,
              74,
              74,
              86,
              107,
              108,
              77,
              82,
              85,
              100,
              70,
              88,
              48,
              70,
              69,
              84,
              85,
              108,
              79,
              88,
              48,
              70,
              69,
              84,
              85,
              108,
              79,
              88,
              49,
              74,
              70,
              81,
              85,
              81,
              105,
              76,
              67,
              74,
              81,
              85,
              107,
              108,
              87,
              83,
              85,
              120,
              70,
              82,
              48,
              86,
              102,
              81,
              85,
              82,
              78,
              83,
              85,
              53,
              102,
              81,
              85,
              82,
              78,
              83,
              85,
              53,
              102,
              86,
              49,
              74,
              74,
              86,
              69,
              85,
              105,
              88,
              83,
              119,
              105,
              99,
              51,
              86,
              105,
              73,
              106,
              111,
              105,
              89,
              88,
              78,
              106,
              98,
              50,
              120,
              108,
              99,
              50,
              86,
              50,
              89,
              87,
              120,
              108,
              98,
              110,
              82,
              112,
              98,
              109,
              57,
              65,
              90,
              50,
              49,
              104,
              97,
              87,
              119,
              117,
              89,
              50,
              57,
              116,
              73,
              105,
              119,
              105,
              97,
              87,
              70,
              48,
              73,
              106,
              111,
              120,
              78,
              122,
              89,
              120,
              78,
              122,
              73,
              52,
              79,
              84,
              89,
              121,
              76,
              67,
              74,
              108,
              101,
              72,
              65,
              105,
              79,
              106,
              69,
              51,
              78,
              106,
              69,
              51,
              77,
              122,
              73,
              49,
              78,
              106,
              74,
              57,
              46,
              74,
              73,
              109,
              49,
              57,
              66,
              88,
              121,
              71,
              115,
              81,
              50,
              50,
              73,
              67,
              89,
              70,
              119,
              84,
              74,
              118,
              116,
              105,
              66,
              57,
              86,
              86,
              88,
              87,
              57,
              54,
              66,
              75,
              69,
              119,
              79,
              122,
              77,
              89,
              50,
              120,
              70,
              119,
              34,
              44,
              34,
              114,
              101,
              102,
              114,
              101,
              115,
              104,
              84,
              111,
              107,
              101,
              110,
              34,
              58,
              34,
              101,
              121,
              74,
              104,
              98,
              71,
              99,
              105,
              79,
              105,
              74,
              73,
              85,
              122,
              73,
              49,
              78,
              105,
              74,
              57,
              46,
              101,
              121,
              74,
              104,
              89,
              50,
              78,
              108,
              99,
              51,
              78,
              102,
              100,
              72,
              108,
              119,
              90,
              83,
              73,
              54,
              73,
              110,
              74,
              108,
              90,
              110,
              74,
              108,
              99,
              50,
              103,
              105,
              76,
              67,
              74,
              49,
              99,
              50,
              86,
              121,
              88,
              51,
              82,
              53,
              99,
              71,
              85,
              105,
              79,
              105,
              74,
              104,
              90,
              71,
              49,
              112,
              98,
              105,
              73,
              115,
              73,
              110,
              82,
              53,
              99,
              71,
              85,
              105,
              79,
              105,
              74,
              121,
              100,
              88,
              78,
              108,
              99,
              105,
              73,
              115,
              73,
              109,
              86,
              116,
              89,
              87,
              108,
              115,
              73,
              106,
              111,
              105,
              89,
              88,
              78,
              106,
              98,
              50,
              120,
              108,
              99,
              50,
              86,
              50,
              89,
              87,
              120,
              108,
              98,
              110,
              82,
              112,
              98,
              109,
              57,
              65,
              90,
              50,
              49,
              104,
              97,
              87,
              119,
              117,
              89,
              50,
              57,
              116,
              73,
              105,
              119,
              105,
              89,
              88,
              86,
              48,
              97,
              71,
              57,
              121,
              97,
              88,
              82,
              112,
              90,
              88,
              77,
              105,
              79,
              108,
              115,
              105,
              85,
              70,
              74,
              74,
              86,
              107,
              108,
              77,
              82,
              85,
              100,
              70,
              88,
              49,
              74,
              70,
              82,
              108,
              74,
              70,
              85,
              48,
              104,
              102,
              84,
              48,
              53,
              77,
              87,
              83,
              74,
              100,
              76,
              67,
              74,
              122,
              100,
              87,
              73,
              105,
              79,
              105,
              74,
              104,
              99,
              50,
              78,
              118,
              98,
              71,
              86,
              122,
              90,
              88,
              90,
              104,
              98,
              71,
              86,
              117,
              100,
              71,
              108,
              117,
              98,
              48,
              66,
              110,
              98,
              87,
              70,
              112,
              98,
              67,
              53,
              106,
              98,
              50,
              48,
              105,
              76,
              67,
              74,
              112,
              89,
              88,
              81,
              105,
              79,
              106,
              69,
              51,
              78,
              106,
              69,
              51,
              77,
              106,
              103,
              53,
              78,
              106,
              73,
              115,
              73,
              109,
              86,
              52,
              99,
              67,
              73,
              54,
              77,
              84,
              99,
              50,
              77,
              106,
              77,
              122,
              77,
              122,
              99,
              50,
              77,
              110,
              48,
              46,
              103,
              82,
              53,
              81,
              88,
              113,
              86,
              108,
              75,
              101,
              76,
              111,
              117,
              50,
              65,
              66,
              88,
              108,
              52,
              70,
              71,
              76,
              116,
              82,
              97,
              71,
              86,
              82,
              69,
              111,
              45,
              103,
              57,
              114,
              86,
              70,
              107,
              72,
              87,
              66,
              122,
              71,
              52,
              34,
              44,
              34,
              117,
              115,
              101,
              114,
              34,
              58,
              123,
              34,
              117,
              115,
              101,
              114,
              84,
              121,
              112,
              101,
              34,
              58,
              34,
              65,
              100,
              109,
              105,
              110,
              68,
              84,
              79,
              34,
              44,
              34,
              102,
              105,
              114,
              115,
              116,
              78,
              97,
              109,
              101,
              34,
              58,
              34,
              86,
              97,
              108,
              101,
              110,
              116,
              105,
              110,
              111,
              34,
              44,
              34,
              108,
              97,
              115,
              116,
              78,
              97,
              109,
              101,
              34,
              58,
              34,
              65,
              115,
              99,
              111,
              108,
              101,
              115,
              101,
              34,
              44,
              34,
              101,
              109,
              97,
              105,
              108,
              34,
              58,
              34,
              97,
              115,
              99,
              111,
              108,
              101,
              115,
              101,
              118,
              97,
              108,
              101,
              110,
              116,
              105,
              110,
              111,
              64,
              103,
              109,
              97,
              105,
              108,
              46,
              99,
              111,
              109,
              34,
              44,
              34,
              105,
              100,
              34,
              58,
              49,
              44,
              34,
              117,
              115,
              101,
              114,
              110,
              97,
              109,
              101,
              34,
              58,
              110,
              117,
              108,
              108,
              125,
              125
            ]
          },
          "cookie": [],
          "responseTime": 531,
          "responseSize": 1487
        },
        "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
        "assertions": [
          {
            "assertion": "‚úÖ Status code is 200",
            "skipped": false
          },
          {
            "assertion": "‚úÖ JWT token received from admin login",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 1,
              "test": "‚úÖ JWT token received from admin login",
              "message": "expected undefined to deeply equal true",
              "stack": "AssertionError: expected undefined to deeply equal true\n   at Object.eval sandbox-script.js:2:2)"
            }
          },
          {
            "assertion": "‚úÖ Admin user data returned",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 2,
              "test": "‚úÖ Admin user data returned",
              "message": "Target cannot be null or undefined.",
              "stack": "AssertionError: Target cannot be null or undefined.\n   at Object.eval sandbox-script.js:3:2)"
            }
          }
        ]
      },
      {
        "cursor": {
          "ref": "03518bf0-11a6-4be3-871b-3081612e1986",
          "length": 6,
          "cycles": 1,
          "position": 2,
          "iteration": 0,
          "httpRequestId": "9df3a3aa-92e8-4bf2-ae61-13c68253d1d8"
        },
        "item": {
          "id": "3e107438-1fdd-4d91-9310-a526923c42df",
          "name": "Step 3: Get Restaurant User by Email (test@test.it)",
          "description": {
            "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "restaurant",
                "user",
                "by-email",
                "test@test.it"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{testAdminToken}}"
              }
            ],
            "method": "GET"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                  "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('username');",
                  "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    ",
                  "    // Store the restaurant user ID",
                  "    pm.environment.set('testRUserId', jsonData.data.id);",
                  "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                  "    ",
                  "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                  "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                  "    console.log('üìß User email:', jsonData.data.username);",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                  "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                ],
                "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "admin",
              "restaurant",
              "user",
              "by-email",
              "test@test.it"
            ],
            "host": [
              "api",
              "greedys",
              "it"
            ],
            "query": [],
            "variable": []
          },
          "header": [
            {
              "key": "Authorization",
              "value": "Bearer {{testAdminToken}}"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "a2805715-4f39-416a-95c2-74b3bcd6bc55",
              "system": true
            },
            {
              "key": "Host",
              "value": "api.greedys.it",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            }
          ],
          "method": "GET"
        },
        "response": {
          "id": "5e3bcc04-87c7-4cbb-8bcc-bd169827da7e",
          "status": "Unauthorized",
          "code": 401,
          "header": [
            {
              "key": "Cache-Control",
              "value": "no-cache, no-store, max-age=0, must-revalidate"
            },
            {
              "key": "Content-Length",
              "value": "111"
            },
            {
              "key": "Content-Type",
              "value": "application/json;charset=UTF-8"
            },
            {
              "key": "Date",
              "value": "Wed, 29 Oct 2025 09:09:22 GMT"
            },
            {
              "key": "Expires",
              "value": "0"
            },
            {
              "key": "Pragma",
              "value": "no-cache"
            },
            {
              "key": "Vary",
              "value": "Origin"
            },
            {
              "key": "Vary",
              "value": "Access-Control-Request-Method"
            },
            {
              "key": "Vary",
              "value": "Access-Control-Request-Headers"
            },
            {
              "key": "X-Content-Type-Options",
              "value": "nosniff"
            },
            {
              "key": "X-Frame-Options",
              "value": "DENY"
            },
            {
              "key": "X-Xss-Protection",
              "value": "0"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              123,
              34,
              99,
              111,
              100,
              101,
              34,
              58,
              34,
              65,
              85,
              84,
              72,
              69,
              78,
              84,
              73,
              67,
              65,
              84,
              73,
              79,
              78,
              95,
              82,
              69,
              81,
              85,
              73,
              82,
              69,
              68,
              34,
              44,
              34,
              100,
              101,
              116,
              97,
              105,
              108,
              115,
              34,
              58,
              34,
              65,
              117,
              116,
              104,
              101,
              110,
              116,
              105,
              99,
              97,
              116,
              105,
              111,
              110,
              32,
              114,
              101,
              113,
              117,
              105,
              114,
              101,
              100,
              58,
              32,
              65,
              99,
              99,
              101,
              115,
              115,
              32,
              116,
              111,
              107,
              101,
              110,
              32,
              114,
              101,
              113,
              117,
              105,
              114,
              101,
              100,
              32,
              102,
              111,
              114,
              32,
              116,
              104,
              105,
              115,
              32,
              101,
              110,
              100,
              112,
              111,
              105,
              110,
              116,
              34,
              125
            ]
          },
          "cookie": [],
          "responseTime": 79,
          "responseSize": 111
        },
        "id": "3e107438-1fdd-4d91-9310-a526923c42df",
        "assertions": [
          {
            "assertion": "‚úÖ Status code is 200",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 0,
              "test": "‚úÖ Status code is 200",
              "message": "expected response to have status code 200 but got 401",
              "stack": "AssertionError: expected response to have status code 200 but got 401\n   at Object.eval sandbox-script.js:1:3)"
            }
          },
          {
            "assertion": "‚úÖ Restaurant user found with email test@test.it",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 1,
              "test": "‚úÖ Restaurant user found with email test@test.it",
              "message": "expected undefined to deeply equal true",
              "stack": "AssertionError: expected undefined to deeply equal true\n   at Object.eval sandbox-script.js:2:3)"
            }
          },
          {
            "assertion": "‚úÖ Store Restaurant User ID for enablement",
            "skipped": false,
            "error": {
              "name": "TypeError",
              "index": 2,
              "test": "‚úÖ Store Restaurant User ID for enablement",
              "message": "Cannot read properties of undefined (reading 'id')",
              "stack": "TypeError: Cannot read properties of undefined (reading 'id')\n   at Object.eval sandbox-script.js:3:3)"
            }
          }
        ]
      },
      {
        "cursor": {
          "ref": "9356bbbc-18b1-495f-9d9c-3e834cee6e6b",
          "length": 6,
          "cycles": 1,
          "position": 3,
          "iteration": 0,
          "httpRequestId": "1a107ffb-1d7c-4923-88ca-bdd944b1b966"
        },
        "item": {
          "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
          "name": "Step 4: Enable Restaurant User (test@test.it)",
          "description": {
            "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "restaurant",
                "user",
                "enable"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [
                {
                  "key": "email",
                  "value": "test@test.it"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{testAdminToken}}"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 4: ENABLE RESTAURANT USER ===",
                  "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                  "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                ],
                "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "admin",
              "restaurant",
              "user",
              "enable"
            ],
            "host": [
              "api",
              "greedys",
              "it"
            ],
            "query": [
              {
                "key": "email",
                "value": "test@test.it"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            },
            {
              "key": "Authorization",
              "value": "Bearer {{testAdminToken}}"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "ffc95528-4e2b-4ed6-9b43-3e5f97cd294b",
              "system": true
            },
            {
              "key": "Host",
              "value": "api.greedys.it",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "971ffcfb-06b6-44c6-a3e8-30f3915c9c5f",
          "status": "Unauthorized",
          "code": 401,
          "header": [
            {
              "key": "Cache-Control",
              "value": "no-cache, no-store, max-age=0, must-revalidate"
            },
            {
              "key": "Content-Length",
              "value": "111"
            },
            {
              "key": "Content-Type",
              "value": "application/json;charset=UTF-8"
            },
            {
              "key": "Date",
              "value": "Wed, 29 Oct 2025 09:09:22 GMT"
            },
            {
              "key": "Expires",
              "value": "0"
            },
            {
              "key": "Pragma",
              "value": "no-cache"
            },
            {
              "key": "Vary",
              "value": "Origin"
            },
            {
              "key": "Vary",
              "value": "Access-Control-Request-Method"
            },
            {
              "key": "Vary",
              "value": "Access-Control-Request-Headers"
            },
            {
              "key": "X-Content-Type-Options",
              "value": "nosniff"
            },
            {
              "key": "X-Frame-Options",
              "value": "DENY"
            },
            {
              "key": "X-Xss-Protection",
              "value": "0"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              123,
              34,
              99,
              111,
              100,
              101,
              34,
              58,
              34,
              65,
              85,
              84,
              72,
              69,
              78,
              84,
              73,
              67,
              65,
              84,
              73,
              79,
              78,
              95,
              82,
              69,
              81,
              85,
              73,
              82,
              69,
              68,
              34,
              44,
              34,
              100,
              101,
              116,
              97,
              105,
              108,
              115,
              34,
              58,
              34,
              65,
              117,
              116,
              104,
              101,
              110,
              116,
              105,
              99,
              97,
              116,
              105,
              111,
              110,
              32,
              114,
              101,
              113,
              117,
              105,
              114,
              101,
              100,
              58,
              32,
              65,
              99,
              99,
              101,
              115,
              115,
              32,
              116,
              111,
              107,
              101,
              110,
              32,
              114,
              101,
              113,
              117,
              105,
              114,
              101,
              100,
              32,
              102,
              111,
              114,
              32,
              116,
              104,
              105,
              115,
              32,
              101,
              110,
              100,
              112,
              111,
              105,
              110,
              116,
              34,
              125
            ]
          },
          "cookie": [],
          "responseTime": 77,
          "responseSize": 111
        },
        "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
        "assertions": [
          {
            "assertion": "‚úÖ Status code is 200",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 0,
              "test": "‚úÖ Status code is 200",
              "message": "expected response to have status code 200 but got 401",
              "stack": "AssertionError: expected response to have status code 200 but got 401\n   at Object.eval sandbox-script.js:1:4)"
            }
          },
          {
            "assertion": "‚úÖ Restaurant user enabled successfully",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 1,
              "test": "‚úÖ Restaurant user enabled successfully",
              "message": "expected undefined to deeply equal true",
              "stack": "AssertionError: expected undefined to deeply equal true\n   at Object.eval sandbox-script.js:2:4)"
            }
          }
        ]
      },
      {
        "cursor": {
          "ref": "55857d2c-42e9-4122-93ac-038098c49b5d",
          "length": 6,
          "cycles": 1,
          "position": 4,
          "iteration": 0,
          "httpRequestId": "5e235e76-2e9c-42c6-8b69-40b60ca643cf"
        },
        "item": {
          "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
          "name": "Step 5: Enable Restaurant",
          "description": {
            "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "restaurant",
                "{{testRestaurantId}}",
                "enable_restaurant"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{testAdminToken}}"
              }
            ],
            "method": "PUT"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 5: ENABLE RESTAURANT ===",
                  "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.message).to.include('successfully');",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                  "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                ],
                "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "admin",
              "restaurant",
              "%7B%7BtestRestaurantId%7D%7D",
              "enable_restaurant"
            ],
            "host": [
              "api",
              "greedys",
              "it"
            ],
            "query": [],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            },
            {
              "key": "Authorization",
              "value": "Bearer {{testAdminToken}}"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "ec82e3f2-4b4d-4967-9cab-d07746cbca50",
              "system": true
            },
            {
              "key": "Host",
              "value": "api.greedys.it",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "PUT"
        },
        "response": {
          "id": "17fd80ee-6475-41d6-ae05-cf38ae1d7491",
          "status": "Unauthorized",
          "code": 401,
          "header": [
            {
              "key": "Cache-Control",
              "value": "no-cache, no-store, max-age=0, must-revalidate"
            },
            {
              "key": "Content-Length",
              "value": "111"
            },
            {
              "key": "Content-Type",
              "value": "application/json;charset=UTF-8"
            },
            {
              "key": "Date",
              "value": "Wed, 29 Oct 2025 09:09:22 GMT"
            },
            {
              "key": "Expires",
              "value": "0"
            },
            {
              "key": "Pragma",
              "value": "no-cache"
            },
            {
              "key": "Vary",
              "value": "Origin"
            },
            {
              "key": "Vary",
              "value": "Access-Control-Request-Method"
            },
            {
              "key": "Vary",
              "value": "Access-Control-Request-Headers"
            },
            {
              "key": "X-Content-Type-Options",
              "value": "nosniff"
            },
            {
              "key": "X-Frame-Options",
              "value": "DENY"
            },
            {
              "key": "X-Xss-Protection",
              "value": "0"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              123,
              34,
              99,
              111,
              100,
              101,
              34,
              58,
              34,
              65,
              85,
              84,
              72,
              69,
              78,
              84,
              73,
              67,
              65,
              84,
              73,
              79,
              78,
              95,
              82,
              69,
              81,
              85,
              73,
              82,
              69,
              68,
              34,
              44,
              34,
              100,
              101,
              116,
              97,
              105,
              108,
              115,
              34,
              58,
              34,
              65,
              117,
              116,
              104,
              101,
              110,
              116,
              105,
              99,
              97,
              116,
              105,
              111,
              110,
              32,
              114,
              101,
              113,
              117,
              105,
              114,
              101,
              100,
              58,
              32,
              65,
              99,
              99,
              101,
              115,
              115,
              32,
              116,
              111,
              107,
              101,
              110,
              32,
              114,
              101,
              113,
              117,
              105,
              114,
              101,
              100,
              32,
              102,
              111,
              114,
              32,
              116,
              104,
              105,
              115,
              32,
              101,
              110,
              100,
              112,
              111,
              105,
              110,
              116,
              34,
              125
            ]
          },
          "cookie": [],
          "responseTime": 90,
          "responseSize": 111
        },
        "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
        "assertions": [
          {
            "assertion": "‚úÖ Status code is 200",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 0,
              "test": "‚úÖ Status code is 200",
              "message": "expected response to have status code 200 but got 401",
              "stack": "AssertionError: expected response to have status code 200 but got 401\n   at Object.eval sandbox-script.js:1:5)"
            }
          },
          {
            "assertion": "‚úÖ Restaurant enabled successfully",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 1,
              "test": "‚úÖ Restaurant enabled successfully",
              "message": "expected undefined to deeply equal true",
              "stack": "AssertionError: expected undefined to deeply equal true\n   at Object.eval sandbox-script.js:2:5)"
            }
          }
        ]
      },
      {
        "cursor": {
          "ref": "980f0021-1d1f-41de-8190-a83e37af650a",
          "length": 6,
          "cycles": 1,
          "position": 5,
          "iteration": 0,
          "httpRequestId": "e33859c4-0fb0-45d4-9284-a3d98bed67e1"
        },
        "item": {
          "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
          "name": "Step 6: Restaurant User Login (Verification)",
          "description": {
            "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "restaurant",
                "user",
                "auth",
                "login"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                  "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.data).to.have.property('jwt');",
                  "    ",
                  "    // Store restaurant token",
                  "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                  "    pm.environment.set('testRestaurantToken', token);",
                  "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                  "});",
                  "",
                  "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data.user) {",
                  "        console.log('üë§ User:', jsonData.data.user.username);",
                  "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                  "    }",
                  "});",
                  "",
                  "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                  "console.log('‚ïê'.repeat(60));",
                  "console.log('‚úÖ Ristorante registrato: test@test.it');",
                  "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                  "console.log('‚úÖ Admin ha abilitato il ristorante');",
                  "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                  "console.log('‚ïê'.repeat(60));"
                ],
                "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "restaurant",
              "user",
              "auth",
              "login"
            ],
            "host": [
              "api",
              "greedys",
              "it"
            ],
            "query": [],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "715433c5-163a-4622-925e-668d40dbf0d5",
              "system": true
            },
            {
              "key": "Host",
              "value": "api.greedys.it",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "90",
              "system": true
            }
          ],
          "method": "POST",
          "body": {
            "mode": "raw",
            "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
          }
        },
        "response": {
          "id": "a4f56942-c7d5-41d1-85a4-446f936b3eb0",
          "status": "Unauthorized",
          "code": 401,
          "header": [
            {
              "key": "Cache-Control",
              "value": "no-cache, no-store, max-age=0, must-revalidate"
            },
            {
              "key": "Content-Type",
              "value": "application/json"
            },
            {
              "key": "Date",
              "value": "Wed, 29 Oct 2025 09:09:23 GMT"
            },
            {
              "key": "Expires",
              "value": "0"
            },
            {
              "key": "Pragma",
              "value": "no-cache"
            },
            {
              "key": "Vary",
              "value": "Origin"
            },
            {
              "key": "Vary",
              "value": "Access-Control-Request-Method"
            },
            {
              "key": "Vary",
              "value": "Access-Control-Request-Headers"
            },
            {
              "key": "X-Content-Type-Options",
              "value": "nosniff"
            },
            {
              "key": "X-Frame-Options",
              "value": "DENY"
            },
            {
              "key": "X-Xss-Protection",
              "value": "0"
            },
            {
              "key": "Transfer-Encoding",
              "value": "chunked"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              123,
              34,
              99,
              111,
              100,
              101,
              34,
              58,
              34,
              65,
              67,
              67,
              79,
              85,
              78,
              84,
              95,
              68,
              73,
              83,
              65,
              66,
              76,
              69,
              68,
              34,
              44,
              34,
              100,
              101,
              116,
              97,
              105,
              108,
              115,
              34,
              58,
              34,
              65,
              99,
              99,
              111,
              117,
              110,
              116,
              32,
              105,
              115,
              32,
              100,
              105,
              115,
              97,
              98,
              108,
              101,
              100,
              34,
              125
            ]
          },
          "cookie": [],
          "responseTime": 213,
          "responseSize": 59
        },
        "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
        "assertions": [
          {
            "assertion": "‚úÖ Status code is 200",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 0,
              "test": "‚úÖ Status code is 200",
              "message": "expected response to have status code 200 but got 401",
              "stack": "AssertionError: expected response to have status code 200 but got 401\n   at Object.eval sandbox-script.js:1:6)"
            }
          },
          {
            "assertion": "‚úÖ JWT token received for restaurant user",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 1,
              "test": "‚úÖ JWT token received for restaurant user",
              "message": "expected undefined to deeply equal true",
              "stack": "AssertionError: expected undefined to deeply equal true\n   at Object.eval sandbox-script.js:2:6)"
            }
          },
          {
            "assertion": "‚úÖ User and restaurant info returned",
            "skipped": false,
            "error": {
              "name": "TypeError",
              "index": 2,
              "test": "‚úÖ User and restaurant info returned",
              "message": "Cannot read properties of undefined (reading 'user')",
              "stack": "TypeError: Cannot read properties of undefined (reading 'user')\n   at Object.eval sandbox-script.js:3:6)"
            }
          }
        ]
      }
    ],
    "transfers": {
      "responseTotal": 2054
    },
    "failures": [
      {
        "error": {
          "name": "AssertionError",
          "index": 1,
          "test": "‚úÖ Restaurant registration successful",
          "message": "expected { Object (id, name, ...) } to have property 'success'",
          "stack": "AssertionError: expected { Object (id, name, ...) } to have property 'success'\n   at Object.eval sandbox-script.js:2:1)",
          "checksum": "0170aa3604c0401cd47abe644dc1f69c",
          "id": "1cc6f29c-765b-493e-9703-aeddc33bdfeb",
          "timestamp": 1761728961973,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 2,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 1,
              "native": false
            }
          ]
        },
        "at": "assertion:1 in test-script",
        "source": {
          "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
          "name": "Step 1: Register New Restaurant (test@test.it)",
          "description": {
            "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "restaurant",
                "register",
                "new"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 1: REGISTER NEW RESTAURANT ===",
                  "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                  "    pm.expect(jsonData).to.have.property('success');",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    ",
                  "    // Save restaurant ID for next steps",
                  "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                  "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                  "    ",
                  "    // Save user/owner ID if available",
                  "    if (jsonData.data.userId) {",
                  "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                  "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data && jsonData.data.email) {",
                  "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                  "    }",
                  "});",
                  "",
                  "// Store status for debugging",
                  "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                  "console.log('Next: Proceed to STEP 2 - Admin Login');"
                ],
                "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "position": 0,
          "iteration": 0,
          "length": 6,
          "cycles": 1,
          "empty": false,
          "eof": false,
          "bof": true,
          "cr": false,
          "ref": "5409bfd3-eaf9-4cc0-9cc1-4e81a34bad7f",
          "httpRequestId": "97107788-84ae-418b-838b-dd3f18eb6488",
          "scriptId": "9773e52c-1a61-413b-86ec-d824b2748760",
          "execution": "efb653aa-1dc1-479e-bfd6-2b763a155897"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 2,
          "test": "‚úÖ Restaurant data returned with ID",
          "message": "Target cannot be null or undefined.",
          "stack": "AssertionError: Target cannot be null or undefined.\n   at Object.eval sandbox-script.js:3:1)",
          "checksum": "9b45f3ab7709ff25758265e44a152f6f",
          "id": "ac89fb9a-8378-48d9-94d8-9945a6fed20a",
          "timestamp": 1761728961976,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 3,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 1,
              "native": false
            }
          ]
        },
        "at": "assertion:2 in test-script",
        "source": {
          "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
          "name": "Step 1: Register New Restaurant (test@test.it)",
          "description": {
            "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "restaurant",
                "register",
                "new"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 1: REGISTER NEW RESTAURANT ===",
                  "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                  "    pm.expect(jsonData).to.have.property('success');",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    ",
                  "    // Save restaurant ID for next steps",
                  "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                  "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                  "    ",
                  "    // Save user/owner ID if available",
                  "    if (jsonData.data.userId) {",
                  "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                  "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data && jsonData.data.email) {",
                  "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                  "    }",
                  "});",
                  "",
                  "// Store status for debugging",
                  "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                  "console.log('Next: Proceed to STEP 2 - Admin Login');"
                ],
                "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "position": 0,
          "iteration": 0,
          "length": 6,
          "cycles": 1,
          "empty": false,
          "eof": false,
          "bof": true,
          "cr": false,
          "ref": "5409bfd3-eaf9-4cc0-9cc1-4e81a34bad7f",
          "httpRequestId": "97107788-84ae-418b-838b-dd3f18eb6488",
          "scriptId": "9773e52c-1a61-413b-86ec-d824b2748760",
          "execution": "efb653aa-1dc1-479e-bfd6-2b763a155897"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 1,
          "test": "‚úÖ JWT token received from admin login",
          "message": "expected undefined to deeply equal true",
          "stack": "AssertionError: expected undefined to deeply equal true\n   at Object.eval sandbox-script.js:2:2)",
          "checksum": "3c00a363d400de9d5657bed9a8370450",
          "id": "38409b08-dc70-4415-9612-c4c7003b82ba",
          "timestamp": 1761728962561,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 2,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 2,
              "native": false
            }
          ]
        },
        "at": "assertion:1 in test-script",
        "source": {
          "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
          "name": "Step 2: Admin Login",
          "description": {
            "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "auth",
                "login"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 2: ADMIN LOGIN ===",
                  "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.data).to.have.property('jwt');",
                  "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                  "    ",
                  "    // Store admin token for subsequent admin requests",
                  "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                  "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                  "    ",
                  "    // Store refresh token",
                  "    if (jsonData.data.refreshToken) {",
                  "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Admin user data returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('user');",
                  "    pm.expect(jsonData.data.user).to.have.property('id');",
                  "    ",
                  "    // Save admin ID",
                  "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                  "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                  "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                ],
                "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "ref": "4fc1486f-7310-4257-906c-3f284f7bc83e",
          "length": 6,
          "cycles": 1,
          "position": 1,
          "iteration": 0,
          "httpRequestId": "68bc9f75-087a-41c5-8d4d-806dc1a2fb08",
          "scriptId": "727b0802-0c03-464f-9dc2-cac884cc093d",
          "execution": "f5fed990-524a-4e20-a075-31c00e75c581"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 2,
          "test": "‚úÖ Admin user data returned",
          "message": "Target cannot be null or undefined.",
          "stack": "AssertionError: Target cannot be null or undefined.\n   at Object.eval sandbox-script.js:3:2)",
          "checksum": "59bb9d256257037c868bab9c5be1584b",
          "id": "cdb6b20a-b65b-4a65-bca6-1184b4b2fed4",
          "timestamp": 1761728962562,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 3,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 2,
              "native": false
            }
          ]
        },
        "at": "assertion:2 in test-script",
        "source": {
          "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
          "name": "Step 2: Admin Login",
          "description": {
            "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "auth",
                "login"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 2: ADMIN LOGIN ===",
                  "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.data).to.have.property('jwt');",
                  "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                  "    ",
                  "    // Store admin token for subsequent admin requests",
                  "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                  "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                  "    ",
                  "    // Store refresh token",
                  "    if (jsonData.data.refreshToken) {",
                  "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Admin user data returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('user');",
                  "    pm.expect(jsonData.data.user).to.have.property('id');",
                  "    ",
                  "    // Save admin ID",
                  "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                  "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                  "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                ],
                "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "ref": "4fc1486f-7310-4257-906c-3f284f7bc83e",
          "length": 6,
          "cycles": 1,
          "position": 1,
          "iteration": 0,
          "httpRequestId": "68bc9f75-087a-41c5-8d4d-806dc1a2fb08",
          "scriptId": "727b0802-0c03-464f-9dc2-cac884cc093d",
          "execution": "f5fed990-524a-4e20-a075-31c00e75c581"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 0,
          "test": "‚úÖ Status code is 200",
          "message": "expected response to have status code 200 but got 401",
          "stack": "AssertionError: expected response to have status code 200 but got 401\n   at Object.eval sandbox-script.js:1:3)",
          "checksum": "f7409099b6c28d36a81b0dd1a7d9e5bd",
          "id": "b25f1cc8-4440-4125-9e1b-6d878f547b5f",
          "timestamp": 1761728962698,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 1,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 3,
              "native": false
            }
          ]
        },
        "at": "assertion:0 in test-script",
        "source": {
          "id": "3e107438-1fdd-4d91-9310-a526923c42df",
          "name": "Step 3: Get Restaurant User by Email (test@test.it)",
          "description": {
            "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "restaurant",
                "user",
                "by-email",
                "test@test.it"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{testAdminToken}}"
              }
            ],
            "method": "GET"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                  "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('username');",
                  "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    ",
                  "    // Store the restaurant user ID",
                  "    pm.environment.set('testRUserId', jsonData.data.id);",
                  "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                  "    ",
                  "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                  "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                  "    console.log('üìß User email:', jsonData.data.username);",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                  "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                ],
                "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "ref": "03518bf0-11a6-4be3-871b-3081612e1986",
          "length": 6,
          "cycles": 1,
          "position": 2,
          "iteration": 0,
          "httpRequestId": "9df3a3aa-92e8-4bf2-ae61-13c68253d1d8",
          "scriptId": "9137f282-b803-41e9-833c-a8a6ee4ee880",
          "execution": "062a1a65-0213-4168-bb00-fa99b8cee56f"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 1,
          "test": "‚úÖ Restaurant user found with email test@test.it",
          "message": "expected undefined to deeply equal true",
          "stack": "AssertionError: expected undefined to deeply equal true\n   at Object.eval sandbox-script.js:2:3)",
          "checksum": "55bb9e61806d794eec10f8f37f671f41",
          "id": "c6d82c30-04db-42f6-a45e-500bc7be3a59",
          "timestamp": 1761728962700,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 2,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 3,
              "native": false
            }
          ]
        },
        "at": "assertion:1 in test-script",
        "source": {
          "id": "3e107438-1fdd-4d91-9310-a526923c42df",
          "name": "Step 3: Get Restaurant User by Email (test@test.it)",
          "description": {
            "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "restaurant",
                "user",
                "by-email",
                "test@test.it"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{testAdminToken}}"
              }
            ],
            "method": "GET"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                  "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('username');",
                  "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    ",
                  "    // Store the restaurant user ID",
                  "    pm.environment.set('testRUserId', jsonData.data.id);",
                  "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                  "    ",
                  "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                  "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                  "    console.log('üìß User email:', jsonData.data.username);",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                  "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                ],
                "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "ref": "03518bf0-11a6-4be3-871b-3081612e1986",
          "length": 6,
          "cycles": 1,
          "position": 2,
          "iteration": 0,
          "httpRequestId": "9df3a3aa-92e8-4bf2-ae61-13c68253d1d8",
          "scriptId": "9137f282-b803-41e9-833c-a8a6ee4ee880",
          "execution": "062a1a65-0213-4168-bb00-fa99b8cee56f"
        }
      },
      {
        "error": {
          "name": "TypeError",
          "index": 2,
          "test": "‚úÖ Store Restaurant User ID for enablement",
          "message": "Cannot read properties of undefined (reading 'id')",
          "stack": "TypeError: Cannot read properties of undefined (reading 'id')\n   at Object.eval sandbox-script.js:3:3)",
          "checksum": "f11f114c506fe72d9da7489b388a74f3",
          "id": "cc8d3967-0ceb-4178-bff4-0762f7c1dfdd",
          "timestamp": 1761728962701,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 3,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 3,
              "native": false
            }
          ]
        },
        "at": "assertion:2 in test-script",
        "source": {
          "id": "3e107438-1fdd-4d91-9310-a526923c42df",
          "name": "Step 3: Get Restaurant User by Email (test@test.it)",
          "description": {
            "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "restaurant",
                "user",
                "by-email",
                "test@test.it"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{testAdminToken}}"
              }
            ],
            "method": "GET"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                  "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('username');",
                  "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    ",
                  "    // Store the restaurant user ID",
                  "    pm.environment.set('testRUserId', jsonData.data.id);",
                  "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                  "    ",
                  "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                  "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                  "    console.log('üìß User email:', jsonData.data.username);",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                  "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                ],
                "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "ref": "03518bf0-11a6-4be3-871b-3081612e1986",
          "length": 6,
          "cycles": 1,
          "position": 2,
          "iteration": 0,
          "httpRequestId": "9df3a3aa-92e8-4bf2-ae61-13c68253d1d8",
          "scriptId": "9137f282-b803-41e9-833c-a8a6ee4ee880",
          "execution": "062a1a65-0213-4168-bb00-fa99b8cee56f"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 0,
          "test": "‚úÖ Status code is 200",
          "message": "expected response to have status code 200 but got 401",
          "stack": "AssertionError: expected response to have status code 200 but got 401\n   at Object.eval sandbox-script.js:1:4)",
          "checksum": "df5822452a76164a7e4405f32d797363",
          "id": "1f04d3e2-d82a-4355-a0bd-0e409d707073",
          "timestamp": 1761728962825,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 1,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 4,
              "native": false
            }
          ]
        },
        "at": "assertion:0 in test-script",
        "source": {
          "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
          "name": "Step 4: Enable Restaurant User (test@test.it)",
          "description": {
            "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "restaurant",
                "user",
                "enable"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [
                {
                  "key": "email",
                  "value": "test@test.it"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{testAdminToken}}"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 4: ENABLE RESTAURANT USER ===",
                  "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                  "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                ],
                "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "ref": "9356bbbc-18b1-495f-9d9c-3e834cee6e6b",
          "length": 6,
          "cycles": 1,
          "position": 3,
          "iteration": 0,
          "httpRequestId": "1a107ffb-1d7c-4923-88ca-bdd944b1b966",
          "scriptId": "644c22f2-c597-4795-a39f-f1aa18435138",
          "execution": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 1,
          "test": "‚úÖ Restaurant user enabled successfully",
          "message": "expected undefined to deeply equal true",
          "stack": "AssertionError: expected undefined to deeply equal true\n   at Object.eval sandbox-script.js:2:4)",
          "checksum": "d31846598f5409ea01b1cd95d6879d05",
          "id": "bbbc3067-e773-4707-bd92-d4fa6f912e0c",
          "timestamp": 1761728962828,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 2,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 4,
              "native": false
            }
          ]
        },
        "at": "assertion:1 in test-script",
        "source": {
          "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
          "name": "Step 4: Enable Restaurant User (test@test.it)",
          "description": {
            "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "restaurant",
                "user",
                "enable"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [
                {
                  "key": "email",
                  "value": "test@test.it"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{testAdminToken}}"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 4: ENABLE RESTAURANT USER ===",
                  "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                  "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                ],
                "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "ref": "9356bbbc-18b1-495f-9d9c-3e834cee6e6b",
          "length": 6,
          "cycles": 1,
          "position": 3,
          "iteration": 0,
          "httpRequestId": "1a107ffb-1d7c-4923-88ca-bdd944b1b966",
          "scriptId": "644c22f2-c597-4795-a39f-f1aa18435138",
          "execution": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 0,
          "test": "‚úÖ Status code is 200",
          "message": "expected response to have status code 200 but got 401",
          "stack": "AssertionError: expected response to have status code 200 but got 401\n   at Object.eval sandbox-script.js:1:5)",
          "checksum": "8ea5828d14a49ea053db8c287de9b02f",
          "id": "6b6fe8c6-8697-48cd-9e75-aa63e3350832",
          "timestamp": 1761728962968,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 1,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 5,
              "native": false
            }
          ]
        },
        "at": "assertion:0 in test-script",
        "source": {
          "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
          "name": "Step 5: Enable Restaurant",
          "description": {
            "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "restaurant",
                "{{testRestaurantId}}",
                "enable_restaurant"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{testAdminToken}}"
              }
            ],
            "method": "PUT"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 5: ENABLE RESTAURANT ===",
                  "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.message).to.include('successfully');",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                  "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                ],
                "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "ref": "55857d2c-42e9-4122-93ac-038098c49b5d",
          "length": 6,
          "cycles": 1,
          "position": 4,
          "iteration": 0,
          "httpRequestId": "5e235e76-2e9c-42c6-8b69-40b60ca643cf",
          "scriptId": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
          "execution": "75ede7c3-1576-4623-957c-f1d5f0820675"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 1,
          "test": "‚úÖ Restaurant enabled successfully",
          "message": "expected undefined to deeply equal true",
          "stack": "AssertionError: expected undefined to deeply equal true\n   at Object.eval sandbox-script.js:2:5)",
          "checksum": "0838b036783db507f47d7060e26d6e7a",
          "id": "168066cd-4ccd-4c44-872c-c61d2ad83d63",
          "timestamp": 1761728962971,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 2,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 5,
              "native": false
            }
          ]
        },
        "at": "assertion:1 in test-script",
        "source": {
          "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
          "name": "Step 5: Enable Restaurant",
          "description": {
            "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "admin",
                "restaurant",
                "{{testRestaurantId}}",
                "enable_restaurant"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{testAdminToken}}"
              }
            ],
            "method": "PUT"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 5: ENABLE RESTAURANT ===",
                  "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.message).to.include('successfully');",
                  "});",
                  "",
                  "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                  "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                ],
                "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "ref": "55857d2c-42e9-4122-93ac-038098c49b5d",
          "length": 6,
          "cycles": 1,
          "position": 4,
          "iteration": 0,
          "httpRequestId": "5e235e76-2e9c-42c6-8b69-40b60ca643cf",
          "scriptId": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
          "execution": "75ede7c3-1576-4623-957c-f1d5f0820675"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 0,
          "test": "‚úÖ Status code is 200",
          "message": "expected response to have status code 200 but got 401",
          "stack": "AssertionError: expected response to have status code 200 but got 401\n   at Object.eval sandbox-script.js:1:6)",
          "checksum": "4c01f631e27e1cf95a42773b0327648c",
          "id": "1b0dc6a8-785f-4919-aa22-72c2b4126266",
          "timestamp": 1761728963250,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 1,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 6,
              "native": false
            }
          ]
        },
        "at": "assertion:0 in test-script",
        "source": {
          "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
          "name": "Step 6: Restaurant User Login (Verification)",
          "description": {
            "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "restaurant",
                "user",
                "auth",
                "login"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                  "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.data).to.have.property('jwt');",
                  "    ",
                  "    // Store restaurant token",
                  "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                  "    pm.environment.set('testRestaurantToken', token);",
                  "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                  "});",
                  "",
                  "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data.user) {",
                  "        console.log('üë§ User:', jsonData.data.user.username);",
                  "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                  "    }",
                  "});",
                  "",
                  "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                  "console.log('‚ïê'.repeat(60));",
                  "console.log('‚úÖ Ristorante registrato: test@test.it');",
                  "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                  "console.log('‚úÖ Admin ha abilitato il ristorante');",
                  "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                  "console.log('‚ïê'.repeat(60));"
                ],
                "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "ref": "980f0021-1d1f-41de-8190-a83e37af650a",
          "length": 6,
          "cycles": 1,
          "position": 5,
          "iteration": 0,
          "httpRequestId": "e33859c4-0fb0-45d4-9284-a3d98bed67e1",
          "scriptId": "668393c3-28c9-49a3-8de0-25be473d4e19",
          "execution": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 1,
          "test": "‚úÖ JWT token received for restaurant user",
          "message": "expected undefined to deeply equal true",
          "stack": "AssertionError: expected undefined to deeply equal true\n   at Object.eval sandbox-script.js:2:6)",
          "checksum": "373e6b27bcbb379cb617f4e5e1fb4a14",
          "id": "041bc1ab-3dcc-4137-9535-0073aa7159e4",
          "timestamp": 1761728963252,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 2,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 6,
              "native": false
            }
          ]
        },
        "at": "assertion:1 in test-script",
        "source": {
          "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
          "name": "Step 6: Restaurant User Login (Verification)",
          "description": {
            "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "restaurant",
                "user",
                "auth",
                "login"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                  "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.data).to.have.property('jwt');",
                  "    ",
                  "    // Store restaurant token",
                  "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                  "    pm.environment.set('testRestaurantToken', token);",
                  "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                  "});",
                  "",
                  "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data.user) {",
                  "        console.log('üë§ User:', jsonData.data.user.username);",
                  "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                  "    }",
                  "});",
                  "",
                  "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                  "console.log('‚ïê'.repeat(60));",
                  "console.log('‚úÖ Ristorante registrato: test@test.it');",
                  "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                  "console.log('‚úÖ Admin ha abilitato il ristorante');",
                  "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                  "console.log('‚ïê'.repeat(60));"
                ],
                "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "ref": "980f0021-1d1f-41de-8190-a83e37af650a",
          "length": 6,
          "cycles": 1,
          "position": 5,
          "iteration": 0,
          "httpRequestId": "e33859c4-0fb0-45d4-9284-a3d98bed67e1",
          "scriptId": "668393c3-28c9-49a3-8de0-25be473d4e19",
          "execution": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
        }
      },
      {
        "error": {
          "name": "TypeError",
          "index": 2,
          "test": "‚úÖ User and restaurant info returned",
          "message": "Cannot read properties of undefined (reading 'user')",
          "stack": "TypeError: Cannot read properties of undefined (reading 'user')\n   at Object.eval sandbox-script.js:3:6)",
          "checksum": "866078403afc8e467d5a083326816ca6",
          "id": "8de488da-7e10-4891-955d-1e98134f4bc0",
          "timestamp": 1761728963254,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 3,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 6,
              "native": false
            }
          ]
        },
        "at": "assertion:2 in test-script",
        "source": {
          "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
          "name": "Step 6: Restaurant User Login (Verification)",
          "description": {
            "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
            "type": "text/plain"
          },
          "request": {
            "url": {
              "path": [
                "restaurant",
                "user",
                "auth",
                "login"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                "type": "text/javascript",
                "exec": [
                  "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                  "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                  "console.log('='.repeat(60));",
                  "",
                  "pm.test(\"‚úÖ Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                  "    ",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "    pm.expect(jsonData.data).to.have.property('jwt');",
                  "    ",
                  "    // Store restaurant token",
                  "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                  "    pm.environment.set('testRestaurantToken', token);",
                  "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                  "});",
                  "",
                  "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data.user) {",
                  "        console.log('üë§ User:', jsonData.data.user.username);",
                  "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                  "    }",
                  "});",
                  "",
                  "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                  "console.log('‚ïê'.repeat(60));",
                  "console.log('‚úÖ Ristorante registrato: test@test.it');",
                  "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                  "console.log('‚úÖ Admin ha abilitato il ristorante');",
                  "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                  "console.log('‚ïê'.repeat(60));"
                ],
                "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
              }
            }
          ]
        },
        "parent": {
          "_": {
            "postman_id": "restaurant-registration-flow"
          },
          "item": [
            {
              "id": "644f3b6a-33dd-4833-a89a-05521b4d2c57",
              "name": "Step 1: Register New Restaurant (test@test.it)",
              "description": {
                "content": "üîß **Step 1: Register New Restaurant**\n\n- Crea un nuovo ristorante con email `test@test.it`\n- Salva il `newTestRestaurantId` per i passi successivi\n- Salva il `newTestRUserId` (se disponibile)\n\n**Status**: 201/200 Created",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "register",
                    "new"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Test Restaurant\",\n    \"email\": \"test@test.it\",\n    \"phoneNumber\": \"+39 06 1234 5678\",\n    \"address\": \"Via del Test 1\",\n    \"city\": \"Roma\",\n    \"post_code\": \"00100\",\n    \"vatNumber\": \"IT12345678901\",\n    \"ownerName\": \"Test\",\n    \"ownerSurname\": \"Owner\",\n    \"description\": \"Test Restaurant per il flusso di registrazione\",\n    \"priceLevel\": \"$$\",\n    \"password\": \"TestPass123!\",\n    \"matchingPassword\": \"TestPass123!\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9773e52c-1a61-413b-86ec-d824b2748760",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 1: REGISTER NEW RESTAURANT ===",
                      "console.log('\\nüìã STEP 1: REGISTER NEW RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 201 or 200\", function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant registration successful\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Response:', JSON.stringify(jsonData, null, 2));",
                      "    pm.expect(jsonData).to.have.property('success');",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData).to.have.property('message');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant data returned with ID\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    ",
                      "    // Save restaurant ID for next steps",
                      "    pm.environment.set('newTestRestaurantId', jsonData.data.id);",
                      "    console.log('üíæ Saved newTestRestaurantId:', jsonData.data.id);",
                      "    ",
                      "    // Save user/owner ID if available",
                      "    if (jsonData.data.userId) {",
                      "        pm.environment.set('newTestRUserId', jsonData.data.userId);",
                      "        console.log('üíæ Saved newTestRUserId:', jsonData.data.userId);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Email is test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data && jsonData.data.email) {",
                      "        pm.expect(jsonData.data.email).to.eql('test@test.it');",
                      "    }",
                      "});",
                      "",
                      "// Store status for debugging",
                      "console.log('\\n‚ú® STEP 1 COMPLETED: Restaurant registered successfully');",
                      "console.log('Next: Proceed to STEP 2 - Admin Login');"
                    ],
                    "_lastExecutionId": "efb653aa-1dc1-479e-bfd6-2b763a155897"
                  }
                }
              ]
            },
            {
              "id": "70fd22de-d6b8-4650-977e-c72fd2421c7c",
              "name": "Step 2: Admin Login",
              "description": {
                "content": "üîê **Step 2: Admin Login**\n\n- Login con le credenziali admin dall'environment\n- Estrae e salva il `testAdminToken`\n- Estrae e salva il `testAdminId`\n\n**Credenziali usate:**\n- Email: `{{adminEmail}}`\n- Password: `{{adminPassword}}`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "727b0802-0c03-464f-9dc2-cac884cc093d",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 2: ADMIN LOGIN ===",
                      "console.log('\\nüìã STEP 2: ADMIN LOGIN');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received from admin login\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Admin Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    pm.expect(jsonData.data).to.have.property('refreshToken');",
                      "    ",
                      "    // Store admin token for subsequent admin requests",
                      "    pm.environment.set('testAdminToken', jsonData.data.jwt);",
                      "    console.log('üíæ Saved testAdminToken:', jsonData.data.jwt.substring(0, 50) + '...');",
                      "    ",
                      "    // Store refresh token",
                      "    if (jsonData.data.refreshToken) {",
                      "        pm.environment.set('testAdminRefreshToken', jsonData.data.refreshToken);",
                      "    }",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Admin user data returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data).to.have.property('user');",
                      "    pm.expect(jsonData.data.user).to.have.property('id');",
                      "    ",
                      "    // Save admin ID",
                      "    pm.environment.set('testAdminId', jsonData.data.user.id);",
                      "    console.log('üíæ Saved testAdminId:', jsonData.data.user.id);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 2 COMPLETED: Admin logged in successfully');",
                      "console.log('Next: Proceed to STEP 3 - Find Restaurant User by Email');"
                    ],
                    "_lastExecutionId": "f5fed990-524a-4e20-a075-31c00e75c581"
                  }
                }
              ]
            },
            {
              "id": "3e107438-1fdd-4d91-9310-a526923c42df",
              "name": "Step 3: Get Restaurant User by Email (test@test.it)",
              "description": {
                "content": "üîç **Step 3: Get Restaurant User by Email**\n\n- Ricerca l'utente ristorante con email `test@test.it`\n- Salva il `testRUserId` per l'abilitazione\n- Salva il `testRestaurantId` del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "by-email",
                    "test@test.it"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "GET"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "9137f282-b803-41e9-833c-a8a6ee4ee880",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 3: GET RESTAURANT USER BY EMAIL ===",
                      "console.log('\\nüìã STEP 3: GET RESTAURANT USER BY EMAIL');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user found with email test@test.it\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä User Details:', JSON.stringify(jsonData.data, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('id');",
                      "    pm.expect(jsonData.data).to.have.property('username');",
                      "    pm.expect(jsonData.data).to.have.property('restaurantId');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Store Restaurant User ID for enablement\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    ",
                      "    // Store the restaurant user ID",
                      "    pm.environment.set('testRUserId', jsonData.data.id);",
                      "    pm.environment.set('testRestaurantId', jsonData.data.restaurantId);",
                      "    ",
                      "    console.log('üíæ Saved testRUserId:', jsonData.data.id);",
                      "    console.log('üíæ Saved testRestaurantId:', jsonData.data.restaurantId);",
                      "    console.log('üìß User email:', jsonData.data.username);",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 3 COMPLETED: Found restaurant user');",
                      "console.log('Next: Proceed to STEP 4 - Enable Restaurant User');"
                    ],
                    "_lastExecutionId": "062a1a65-0213-4168-bb00-fa99b8cee56f"
                  }
                }
              ]
            },
            {
              "id": "ae579afc-81c3-468a-80d4-9218aa955d09",
              "name": "Step 4: Enable Restaurant User (test@test.it)",
              "description": {
                "content": "‚úÖ **Step 4: Enable Restaurant User**\n\n- Abilita l'utente ristorante con email `test@test.it`\n- L'admin autorizza l'accesso del gestore del ristorante\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "user",
                    "enable"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "key": "email",
                      "value": "test@test.it"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "644c22f2-c597-4795-a39f-f1aa18435138",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 4: ENABLE RESTAURANT USER ===",
                      "console.log('\\nüìã STEP 4: ENABLE RESTAURANT USER');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant user enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('User enabled successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 4 COMPLETED: Restaurant User enabled');",
                      "console.log('Next: Proceed to STEP 5 - Enable Restaurant');"
                    ],
                    "_lastExecutionId": "03a6f74b-9bad-4059-8eb2-511e04dbac9d"
                  }
                }
              ]
            },
            {
              "id": "b6b43ef3-41f8-4754-b8c5-aa300905617a",
              "name": "Step 5: Enable Restaurant",
              "description": {
                "content": "‚úÖ **Step 5: Enable Restaurant**\n\n- L'admin abilita il ristorante con ID `{{testRestaurantId}}`\n- Rende il ristorante visibile e operativo nel sistema\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "admin",
                    "restaurant",
                    "{{testRestaurantId}}",
                    "enable_restaurant"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{testAdminToken}}"
                  }
                ],
                "method": "PUT"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "47bf3cbe-c20a-4cc7-9c9d-96f2970e82a8",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 5: ENABLE RESTAURANT ===",
                      "console.log('\\nüìã STEP 5: ENABLE RESTAURANT');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ Restaurant enabled successfully\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Enable Restaurant Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.message).to.include('successfully');",
                      "});",
                      "",
                      "console.log('\\n‚ú® STEP 5 COMPLETED: Restaurant enabled');",
                      "console.log('Next: Proceed to STEP 6 - Restaurant User Login (verification)');"
                    ],
                    "_lastExecutionId": "75ede7c3-1576-4623-957c-f1d5f0820675"
                  }
                }
              ]
            },
            {
              "id": "df3b6321-d8b5-4a9d-b730-a52e233b22f3",
              "name": "Step 6: Restaurant User Login (Verification)",
              "description": {
                "content": "üîê **Step 6: Restaurant User Login (Verification)**\n\n- Verifica che l'utente ristorante pu√≤ fare login\n- Conferma che il flusso di abilitazione √® completo\n\n**Credenziali:**\n- Email: `test@test.it`\n- Password: `TestPass123!`\n\n**Status**: 200 OK",
                "type": "text/plain"
              },
              "request": {
                "url": {
                  "path": [
                    "restaurant",
                    "user",
                    "auth",
                    "login"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"username\": \"test@test.it\",\n    \"password\": \"TestPass123!\",\n    \"rememberMe\": true\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "668393c3-28c9-49a3-8de0-25be473d4e19",
                    "type": "text/javascript",
                    "exec": [
                      "// === STEP 6: RESTAURANT USER LOGIN (VERIFICATION) ===",
                      "console.log('\\nüìã STEP 6: RESTAURANT USER LOGIN - VERIFICATION');",
                      "console.log('='.repeat(60));",
                      "",
                      "pm.test(\"‚úÖ Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"‚úÖ JWT token received for restaurant user\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    console.log('üìä Login Response:', JSON.stringify(jsonData, null, 2));",
                      "    ",
                      "    pm.expect(jsonData.success).to.eql(true);",
                      "    pm.expect(jsonData.data).to.have.property('jwt');",
                      "    ",
                      "    // Store restaurant token",
                      "    var token = jsonData.data.jwt || jsonData.data.accessToken;",
                      "    pm.environment.set('testRestaurantToken', token);",
                      "    console.log('üíæ Saved testRestaurantToken:', token.substring(0, 50) + '...');",
                      "});",
                      "",
                      "pm.test(\"‚úÖ User and restaurant info returned\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.data.user) {",
                      "        console.log('üë§ User:', jsonData.data.user.username);",
                      "        console.log('üè™ Restaurant ID:', jsonData.data.user.restaurantId);",
                      "    }",
                      "});",
                      "",
                      "console.log('\\nüéâ COMPLETE: Restaurant Flow Successful!');",
                      "console.log('‚ïê'.repeat(60));",
                      "console.log('‚úÖ Ristorante registrato: test@test.it');",
                      "console.log('‚úÖ Admin ha abilitato l\\'utente ristorante');",
                      "console.log('‚úÖ Admin ha abilitato il ristorante');",
                      "console.log('‚úÖ Utente ristorante pu√≤ ora fare login');",
                      "console.log('‚ïê'.repeat(60));"
                    ],
                    "_lastExecutionId": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
                  }
                }
              ]
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7b6701ae-cf38-462a-9a91-9302c1034333",
                "type": "text/javascript",
                "exec": [
                  "// Pre-request validation",
                  "const authHeader = pm.request.headers.get('Authorization');",
                  "if (authHeader && authHeader.includes('Bearer')) {",
                  "    console.log('üîê Authenticated request with token');",
                  "}"
                ],
                "_lastExecutionId": "07a7fd06-f6c1-4025-81b6-0b4a4fa3606a"
              }
            }
          ],
          "variable": [],
          "info": {
            "_postman_id": "restaurant-registration-flow",
            "name": "Greedy's Restaurant Registration & Enablement Flow",
            "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
            "description": {
              "content": "Complete workflow for registering a new restaurant (test@test.it) and enabling it through admin approval",
              "type": "text/plain"
            }
          }
        },
        "cursor": {
          "ref": "980f0021-1d1f-41de-8190-a83e37af650a",
          "length": 6,
          "cycles": 1,
          "position": 5,
          "iteration": 0,
          "httpRequestId": "e33859c4-0fb0-45d4-9284-a3d98bed67e1",
          "scriptId": "668393c3-28c9-49a3-8de0-25be473d4e19",
          "execution": "49dd5fbf-942b-4e64-b5f3-17715bab9ac7"
        }
      }
    ],
    "error": null
  }
}